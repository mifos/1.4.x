/* mifosmasterdata.sql
   This script creates the schema as of roughly October 2006.
   Future changes need to be done by upgrade scripts.
   See http://wiki.java.net/bin/view/Javatools/DatabaseStandards
   */
   
-- THIS TABLE HAS BEEN MADE MYISAM BECAUSE 
-- WE DO NOT NEED TO HAVE TRANSACTIONS ON THIS TABLE
CREATE TABLE LOGMESSAGES (
  LOG_ID INTEGER auto_increment NOT NULL,
  LEVEL varchar(20) default NULL,
  MODULE_NAME varchar(50) default NULL,
  CLASS_NAME varchar(50) default NULL,
  METHOD_NAME varchar(50) default NULL,
  LINE_NUMBER varchar(50) default NULL,
  MESSAGE text,
  DATE varchar(50) default NULL,
  TIME timestamp default CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP NOT NULL,
  USERID varchar(25) default NULL,
  OFFICEID varchar(25) default NULL,
  PRIMARY KEY  (LOG_ID)
) ENGINE=MyISAM ;

CREATE TABLE CURRENCY (
  CURRENCY_ID SMALLINT AUTO_INCREMENT NOT NULL,
  CURRENCY_NAME VARCHAR(50),
  DISPLAY_SYMBOL VARCHAR(50),
  ROUNDING_MODE SMALLINT,
  ROUNDING_AMOUNT DECIMAL(6,3),
  DEFAULT_CURRENCY SMALLINT,
  DEFAULT_DIGITS_AFTER_DECIMAL SMALLINT NOT NULL ,
  PRIMARY KEY(CURRENCY_ID)
)
ENGINE=InnoDB CHARACTER SET utf8;



CREATE TABLE LOOKUP_ENTITY (
  ENTITY_ID SMALLINT NOT NULL,
  ENTITY_NAME VARCHAR(100) NOT NULL,
  DESCRIPTION VARCHAR(200),
  PRIMARY KEY(ENTITY_ID)
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE COUNTRY (
  COUNTRY_ID SMALLINT NOT NULL,
  COUNTRY_NAME VARCHAR(100),
  COUNTRY_SHORT_NAME VARCHAR(10),
  PRIMARY KEY(COUNTRY_ID)
)
ENGINE=InnoDB CHARACTER SET utf8;

-- CREATE TABLE GL_CODE (
--   GLCODE_ID SMALLINT NOT NULL,
--   GLCODE_VALUE VARCHAR(10),
--   PRIMARY KEY(GLCODE_ID)
-- )
-- ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE GL_CODE (
  GLCODE_ID SMALLINT AUTO_INCREMENT NOT NULL,
  GLCODE_VALUE VARCHAR(50) NOT NULL,
  PRIMARY KEY(GLCODE_ID)
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE LOOKUP_VALUE (
  LOOKUP_ID INTEGER NOT NULL,
  ENTITY_ID SMALLINT,
  LOOKUP_NAME VARCHAR(100), 
  PRIMARY KEY(LOOKUP_ID),
  FOREIGN KEY(ENTITY_ID)
    REFERENCES LOOKUP_ENTITY(ENTITY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE ACTIVITY (
  ACTIVITY_ID SMALLINT AUTO_INCREMENT NOT NULL,
  PARENT_ID SMALLINT,
  ACTIVITY_NAME_LOOKUP_ID INTEGER NOT NULL,
  DESCRIPTION_LOOKUP_ID INTEGER NOT NULL,
  PRIMARY KEY(ACTIVITY_ID),
  FOREIGN KEY(PARENT_ID)
    REFERENCES ACTIVITY (ACTIVITY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(ACTIVITY_NAME_LOOKUP_ID)
   REFERENCES LOOKUP_VALUE(LOOKUP_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(DESCRIPTION_LOOKUP_ID)
    REFERENCES LOOKUP_VALUE(LOOKUP_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE RECURRENCE_TYPE (
  RECURRENCE_ID SMALLINT AUTO_INCREMENT NOT NULL,
  RECURRENCE_NAME VARCHAR(50),
  DESCRIPTION VARCHAR(200) NOT NULL,
  PRIMARY KEY(RECURRENCE_ID)
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE SURVEY_TEMPLATE (
  SURVEY_TEMPLATE_ID SMALLINT NOT NULL,
  SURVEY_NAME VARCHAR(200),
  PRIMARY KEY(SURVEY_TEMPLATE_ID)
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE MEETING_TYPE (
  MEETING_TYPE_ID SMALLINT AUTO_INCREMENT NOT NULL,
  MEETING_PURPOSE VARCHAR(50),
  DESCRIPTION VARCHAR(200) NOT NULL,
  PRIMARY KEY(MEETING_TYPE_ID)
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE LANGUAGE (
  LANG_ID SMALLINT NOT NULL,
  LANG_NAME VARCHAR(100),
  LANG_SHORT_NAME VARCHAR(10),
  LOOKUP_ID INTEGER NOT NULL,
  PRIMARY KEY(LANG_ID),
  FOREIGN KEY(LOOKUP_ID)
    REFERENCES LOOKUP_VALUE(LOOKUP_ID)
  	  ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE FEE_TYPE (
  FEE_TYPE_ID SMALLINT NOT NULL,
  FEE_LOOKUP_ID SMALLINT,
  FLAT_OR_RATE SMALLINT,
  FORMULA VARCHAR(100),
  PRIMARY KEY(FEE_TYPE_ID),
  FOREIGN KEY(FEE_LOOKUP_ID)
    REFERENCES LOOKUP_ENTITY(ENTITY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE FREQ_OF_DEPOSITS (
  FREQ_OF_DEPOSITS_ID SMALLINT AUTO_INCREMENT NOT NULL,
  LOOKUP_ID INTEGER NOT NULL,
  PRIMARY KEY(FREQ_OF_DEPOSITS_ID),
  FOREIGN KEY(LOOKUP_ID)
    REFERENCES LOOKUP_VALUE(LOOKUP_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE FEE_PAYMENT (
  FEE_PAYMENT_ID SMALLINT AUTO_INCREMENT NOT NULL,
  FEE_PAYMENT_LOOKUP_ID INTEGER,
  PRIMARY KEY  (FEE_PAYMENT_ID),
  FOREIGN KEY (FEE_PAYMENT_LOOKUP_ID)
    REFERENCES LOOKUP_VALUE (LOOKUP_ID)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION
) ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE FUND (
  FUND_ID SMALLINT AUTO_INCREMENT NOT NULL,
  GLCODE_ID SMALLINT,
  FUND_NAME VARCHAR(100),
  VERSION_NO INTEGER,
  PRIMARY KEY(FUND_ID),
  CONSTRAINT FUND_GLCODE FOREIGN KEY(GLCODE_ID)
    REFERENCES GL_CODE(GLCODE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE INTEREST_CALCULATION_TYPES (
  INTEREST_CALCULATION_TYPE_ID SMALLINT AUTO_INCREMENT NOT NULL,
  INTEREST_CALCULATION_LOOKUP_ID INTEGER NOT NULL,
  DESCRIPTION VARCHAR(100),
  PRIMARY KEY(INTEREST_CALCULATION_TYPE_ID),
  FOREIGN KEY(INTEREST_CALCULATION_LOOKUP_ID)
    REFERENCES LOOKUP_VALUE(LOOKUP_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE GRACE_PERIOD_TYPE (
  GRACE_PERIOD_TYPE_ID SMALLINT AUTO_INCREMENT NOT NULL,
  LOOKUP_ID INTEGER NOT NULL,
  PRIMARY KEY(GRACE_PERIOD_TYPE_ID),
  FOREIGN KEY(LOOKUP_ID)
    REFERENCES LOOKUP_VALUE(LOOKUP_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE PRD_TYPE (
  PRD_TYPE_ID SMALLINT AUTO_INCREMENT NOT NULL,
  PRD_TYPE_LOOKUP_ID INTEGER NOT NULL,
  LATENESS_DAYS SMALLINT,
  DORMANCY_DAYS SMALLINT,
  VERSION_NO INTEGER,
  PRIMARY KEY(PRD_TYPE_ID),
  FOREIGN KEY(PRD_TYPE_LOOKUP_ID)
    REFERENCES LOOKUP_VALUE(LOOKUP_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE ACCOUNT_TYPE (
  ACCOUNT_TYPE_ID SMALLINT AUTO_INCREMENT NOT NULL,
  LOOKUP_ID INTEGER NOT NULL,
  DESCRIPTION VARCHAR(50),
  PRIMARY KEY(ACCOUNT_TYPE_ID),
  FOREIGN KEY(LOOKUP_ID)
    REFERENCES LOOKUP_VALUE(LOOKUP_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE RECOMMENDED_AMNT_UNIT (
  RECOMMENDED_AMNT_UNIT_ID SMALLINT AUTO_INCREMENT NOT NULL,
  LOOKUP_ID INTEGER NOT NULL,
  PRIMARY KEY(RECOMMENDED_AMNT_UNIT_ID),
  FOREIGN KEY(LOOKUP_ID)
    REFERENCES LOOKUP_VALUE(LOOKUP_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE PRD_CATEGORY_STATUS (
  PRD_CATEGORY_STATUS_ID SMALLINT AUTO_INCREMENT NOT NULL,
  LOOKUP_ID INTEGER NOT NULL,
  PRIMARY KEY(PRD_CATEGORY_STATUS_ID),
  FOREIGN KEY(LOOKUP_ID)
    REFERENCES LOOKUP_VALUE(LOOKUP_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE PRD_STATE (
  PRD_STATE_ID SMALLINT AUTO_INCREMENT NOT NULL,
  PRD_STATE_LOOKUP_ID INTEGER,
  PRIMARY KEY(PRD_STATE_ID),
  FOREIGN KEY(PRD_STATE_LOOKUP_ID)
    REFERENCES LOOKUP_VALUE(LOOKUP_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE ACCOUNT_ACTION (
  ACCOUNT_ACTION_ID SMALLINT NOT NULL,
  LOOKUP_ID INTEGER NOT NULL,
  PRIMARY KEY(ACCOUNT_ACTION_ID),
  FOREIGN KEY(LOOKUP_ID)
     REFERENCES LOOKUP_VALUE(LOOKUP_ID)
       ON DELETE NO ACTION
       ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;


CREATE TABLE SURVEY (
  SURVEY_ID INTEGER NOT NULL,
  SURVEY_TEMPLATE_ID SMALLINT NOT NULL,
  PRIMARY KEY(SURVEY_ID),
  FOREIGN KEY(SURVEY_TEMPLATE_ID)
    REFERENCES SURVEY_TEMPLATE(SURVEY_TEMPLATE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE YES_NO_MASTER (
  YES_NO_MASTER_ID SMALLINT AUTO_INCREMENT NOT NULL,
  LOOKUP_ID INTEGER NOT NULL,
  PRIMARY KEY(YES_NO_MASTER_ID),
  FOREIGN KEY(LOOKUP_ID)
    REFERENCES LOOKUP_VALUE(LOOKUP_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE WEEK_DAYS_MASTER(
 WEEK_DAYS_MASTER_ID SMALLINT AUTO_INCREMENT NOT NULL,
 LOOKUP_ID INTEGER NOT NULL,
 WORKING_DAY SMALLINT NOT NULL,
 START_OF_FISCAL_WEEK SMALLINT NOT NULL,
  PRIMARY KEY(WEEK_DAYS_MASTER_ID),
  FOREIGN KEY(LOOKUP_ID)
    REFERENCES LOOKUP_VALUE(LOOKUP_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;



CREATE TABLE RANK_DAYS_MASTER(
 RANK_DAYS_MASTER_ID SMALLINT AUTO_INCREMENT NOT NULL,
 LOOKUP_ID INTEGER NOT NULL,
  PRIMARY KEY(RANK_DAYS_MASTER_ID),
  FOREIGN KEY(LOOKUP_ID)
    REFERENCES LOOKUP_VALUE(LOOKUP_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;
 


CREATE TABLE SAVINGS_TYPE (
  SAVINGS_TYPE_ID SMALLINT AUTO_INCREMENT NOT NULL,
  LOOKUP_ID INTEGER NOT NULL,
  PRIMARY KEY(SAVINGS_TYPE_ID),
  FOREIGN KEY(LOOKUP_ID)
    REFERENCES LOOKUP_VALUE(LOOKUP_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE PERSONNEL_LEVEL (
  LEVEL_ID SMALLINT NOT NULL,
  LEVEL_NAME_ID INTEGER NOT NULL,
  PARENT_LEVEL_ID SMALLINT,
  INTERACTION_FLAG SMALLINT,
  PRIMARY KEY(LEVEL_ID),
  FOREIGN KEY(PARENT_LEVEL_ID)
    REFERENCES PERSONNEL_LEVEL(LEVEL_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(LEVEL_NAME_ID)
    REFERENCES LOOKUP_VALUE(LOOKUP_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE OFFICE_LEVEL (
  LEVEL_ID SMALLINT NOT NULL,
  PARENT_LEVEL_ID SMALLINT,
  LEVEL_NAME_ID SMALLINT,
  INTERACTION_FLAG SMALLINT,
  CONFIGURED SMALLINT NOT NULL,
  VERSION_NO INTEGER,
  PRIMARY KEY(LEVEL_ID),
  FOREIGN KEY(PARENT_LEVEL_ID)
    REFERENCES OFFICE_LEVEL(LEVEL_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE PAYMENT_TYPE (
  PAYMENT_TYPE_ID SMALLINT AUTO_INCREMENT NOT NULL,
  PAYMENT_TYPE_LOOKUP_ID INTEGER,
  PRIMARY KEY(PAYMENT_TYPE_ID),
  FOREIGN KEY(PAYMENT_TYPE_LOOKUP_ID)
    REFERENCES LOOKUP_VALUE(LOOKUP_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE PRD_APPLICABLE_MASTER (
  PRD_APPLICABLE_MASTER_ID SMALLINT AUTO_INCREMENT NOT NULL,
  LOOKUP_ID INTEGER NOT NULL,
  PRIMARY KEY(PRD_APPLICABLE_MASTER_ID),
  FOREIGN KEY(LOOKUP_ID)
    REFERENCES LOOKUP_VALUE(LOOKUP_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE PRD_CATEGORY (
  PRD_CATEGORY_ID SMALLINT AUTO_INCREMENT NOT NULL,
  PRD_TYPE_ID SMALLINT NOT NULL,
  GLOBAL_PRD_OFFERING_NUM VARCHAR(50) NOT NULL,
  PRD_CATEGORY_NAME VARCHAR(100) NOT NULL,
  CREATED_DATE DATE,
  CREATED_BY INTEGER,
  OFFICE_ID SMALLINT,
  UPDATED_BY INTEGER,
  UDPATED_DATE DATE,
  STATE SMALLINT NOT NULL,
  DESCRIPTION VARCHAR(500),
  VERSION_NO INTEGER,
  PRIMARY KEY(PRD_CATEGORY_ID),
  FOREIGN KEY(PRD_TYPE_ID)
    REFERENCES PRD_TYPE(PRD_TYPE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE POSITION (
  POSITION_ID INTEGER AUTO_INCREMENT NOT NULL,
  LOOKUP_ID INTEGER NOT NULL,
  PRIMARY KEY(POSITION_ID),
  FOREIGN KEY(LOOKUP_ID)
    REFERENCES LOOKUP_VALUE(LOOKUP_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE CATEGORY_TYPE (
  CATEGORY_ID SMALLINT NOT NULL,
  CATEGORY_LOOKUP_ID INTEGER NOT NULL,
  PRIMARY KEY(CATEGORY_ID),
  FOREIGN KEY(CATEGORY_LOOKUP_ID)
    REFERENCES LOOKUP_VALUE(LOOKUP_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE COLLATERAL_TYPE (
  COLLATERAL_TYPE_ID SMALLINT NOT NULL,
  LOOKUP_ID INTEGER NOT NULL,
  PRIMARY KEY(COLLATERAL_TYPE_ID),
  FOREIGN KEY(LOOKUP_ID)
    REFERENCES LOOKUP_VALUE(LOOKUP_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE CUSTOMER_LEVEL (
  LEVEL_ID SMALLINT NOT NULL,
  PARENT_LEVEL_ID SMALLINT,
  LEVEL_NAME_ID SMALLINT NOT NULL,
  INTERACTION_FLAG SMALLINT,
  MAX_CHILD_COUNT SMALLINT NOT NULL,
  MAX_INSTANCE_COUNT SMALLINT NOT NULL,
  PRIMARY KEY(LEVEL_ID),
  FOREIGN KEY(PARENT_LEVEL_ID)
    REFERENCES CUSTOMER_LEVEL(LEVEL_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(LEVEL_NAME_ID)
    REFERENCES LOOKUP_ENTITY(ENTITY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE ACCOUNT_STATE (
  ACCOUNT_STATE_ID SMALLINT AUTO_INCREMENT NOT NULL,
  LOOKUP_ID INTEGER NOT NULL,
  PRD_TYPE_ID SMALLINT NOT NULL,
  CURRENTLY_IN_USE SMALLINT NOT NULL,
  STATUS_DESCRIPTION VARCHAR(200),
  PRIMARY KEY(ACCOUNT_STATE_ID),
  FOREIGN KEY(LOOKUP_ID)
    REFERENCES LOOKUP_VALUE(LOOKUP_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE PRD_PMNT_TYPE (
  PRD_PMNT_TYPE_ID SMALLINT AUTO_INCREMENT NOT NULL,
  PAYMENT_TYPE_ID SMALLINT NOT NULL,
  ACCOUNT_TYPE_ID SMALLINT NOT NULL,
  ACCOUNT_ACTION_ID SMALLINT NOT NULL,
  IS_SUPPORTED SMALLINT,
  VERSION_NO SMALLINT NOT NULL,
  PRIMARY KEY(PRD_PMNT_TYPE_ID),
  FOREIGN KEY(PAYMENT_TYPE_ID)
    REFERENCES PAYMENT_TYPE(PAYMENT_TYPE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(ACCOUNT_TYPE_ID)
    REFERENCES ACCOUNT_TYPE(ACCOUNT_TYPE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(ACCOUNT_ACTION_ID)
    REFERENCES ACCOUNT_ACTION(ACCOUNT_ACTION_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE PRD_STATUS (
  OFFERING_STATUS_ID SMALLINT AUTO_INCREMENT NOT NULL,
  PRD_STATE_ID SMALLINT NOT NULL,
  PRD_TYPE_ID SMALLINT NOT NULL,
  CURRENTLY_IN_USE SMALLINT NOT NULL,
  VERSION_NO INTEGER NOT NULL,
  PRIMARY KEY(OFFERING_STATUS_ID),
  FOREIGN KEY(PRD_TYPE_ID)
    REFERENCES PRD_TYPE(PRD_TYPE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(PRD_STATE_ID)
    REFERENCES PRD_STATE(PRD_STATE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE INTEREST_TYPES (
  INTEREST_TYPE_ID SMALLINT AUTO_INCREMENT NOT NULL,
  LOOKUP_ID INTEGER NOT NULL,
  CATEGORY_ID SMALLINT NOT NULL,
  DESCRIPTON VARCHAR(50),
  PRIMARY KEY(INTEREST_TYPE_ID),
  FOREIGN KEY(CATEGORY_ID)
    REFERENCES PRD_TYPE(PRD_TYPE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(LOOKUP_ID)
    REFERENCES LOOKUP_VALUE(LOOKUP_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE CUSTOMER_STATE (
  STATUS_ID SMALLINT AUTO_INCREMENT NOT NULL,
  STATUS_LOOKUP_ID INTEGER NOT NULL,
  LEVEL_ID SMALLINT NOT NULL,
  DESCRIPTION VARCHAR(200),
  CURRENTLY_IN_USE SMALLINT NOT NULL,
  PRIMARY KEY(STATUS_ID),
  FOREIGN KEY(LEVEL_ID)
    REFERENCES CUSTOMER_LEVEL(LEVEL_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(STATUS_LOOKUP_ID)
    REFERENCES LOOKUP_VALUE(LOOKUP_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE SUPPORTED_LOCALE (
  LOCALE_ID SMALLINT NOT NULL,
  COUNTRY_ID SMALLINT,
  LANG_ID SMALLINT,
  LOCALE_NAME VARCHAR(50),
  DEFAULT_LOCALE SMALLINT,
  PRIMARY KEY(LOCALE_ID),
  FOREIGN KEY(COUNTRY_ID)
    REFERENCES COUNTRY(COUNTRY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(LANG_ID)
    REFERENCES LANGUAGE(LANG_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE FEE_PAYMENTS_CATEGORIES_TYPE (
  FEE_PAYMENTS_CATEGORY_TYPE_ID SMALLINT NOT NULL,
  FEE_PAYMENT_ID SMALLINT,
  CATEGORY_ID SMALLINT,
  FEE_TYPE_ID SMALLINT,
  PRIMARY KEY(FEE_PAYMENTS_CATEGORY_TYPE_ID),
  FOREIGN KEY(CATEGORY_ID)
    REFERENCES CATEGORY_TYPE(CATEGORY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(FEE_PAYMENT_ID)
    REFERENCES FEE_PAYMENT(FEE_PAYMENT_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(FEE_TYPE_ID)
    REFERENCES FEE_TYPE(FEE_TYPE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE INTEREST_CALC_RULE (
  INTEREST_CALC_RULE_ID SMALLINT AUTO_INCREMENT NOT NULL,
  LOOKUP_ID INTEGER NOT NULL,
  PRIMARY KEY(INTEREST_CALC_RULE_ID),
  FOREIGN KEY(LOOKUP_ID)
    REFERENCES LOOKUP_VALUE(LOOKUP_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE OFFICE_STATUS(
  STATUS_ID SMALLINT AUTO_INCREMENT NOT NULL,
  LOOKUP_ID INT NOT NULL,
  PRIMARY KEY  (STATUS_ID),
  FOREIGN KEY(LOOKUP_ID)
    REFERENCES LOOKUP_VALUE(LOOKUP_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION

)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE OFFICE_CODE(
  CODE_ID SMALLINT AUTO_INCREMENT NOT NULL,
  LOOKUP_ID INT NOT NULL,
  PRIMARY KEY  (CODE_ID),
  FOREIGN KEY(LOOKUP_ID)
    REFERENCES LOOKUP_VALUE(LOOKUP_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION

)
ENGINE=InnoDB CHARACTER SET utf8;


CREATE TABLE OFFICE (
  OFFICE_ID SMALLINT AUTO_INCREMENT NOT NULL,
  GLOBAL_OFFICE_NUM VARCHAR(100) NOT NULL,
  OFFICE_LEVEL_ID SMALLINT NOT NULL,
  SEARCH_ID VARCHAR(100) NOT NULL,
  MAX_CHILD_COUNT INTEGER NOT NULL,
  LOCAL_REMOTE_FLAG SMALLINT NOT NULL,
  DISPLAY_NAME VARCHAR(200) NOT NULL,
  CREATED_BY SMALLINT,
  CREATED_DATE DATE,
  UPDATED_BY SMALLINT,
  UPDATED_DATE DATE,
  OFFICE_SHORT_NAME VARCHAR(4) NOT NULL,
  PARENT_OFFICE_ID SMALLINT DEFAULT NULL,
  STATUS_ID SMALLINT NOT NULL,
  VERSION_NO INTEGER NOT NULL,
  OFFICE_CODE_ID SMALLINT DEFAULT NULL,
  PRIMARY KEY(OFFICE_ID),
  UNIQUE(GLOBAL_OFFICE_NUM),
  FOREIGN KEY(OFFICE_LEVEL_ID)
    REFERENCES OFFICE_LEVEL(LEVEL_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(PARENT_OFFICE_ID)
    REFERENCES OFFICE(OFFICE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(STATUS_ID)
    REFERENCES OFFICE_STATUS(STATUS_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(OFFICE_CODE_ID)
    REFERENCES OFFICE_CODE(CODE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE OFFICE_ADDRESS (
  OFFICE_ADDRESS_ID SMALLINT AUTO_INCREMENT NOT NULL,
  OFFICE_ID SMALLINT NOT NULL,
  ADDRESS_1 VARCHAR(200) DEFAULT NULL,
  ADDRESS_2 VARCHAR(200) DEFAULT NULL,
  ADDRESS_3 VARCHAR(200) DEFAULT NULL,
  CITY VARCHAR(100) DEFAULT NULL,
  STATE VARCHAR(100) DEFAULT NULL,
  COUNTRY VARCHAR(100) DEFAULT NULL,
  ZIP VARCHAR(20) DEFAULT NULL,
  TELEPHONE VARCHAR(20) DEFAULT NULL,
  PRIMARY KEY  (OFFICE_ADDRESS_ID),
 FOREIGN KEY(OFFICE_ID)
    REFERENCES OFFICE(OFFICE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE OFFICE_CUSTOM_FIELD (
  OFFICE_CUSTOM_FIELD_ID INTEGER AUTO_INCREMENT NOT NULL,
  OFFICE_ID SMALLINT NOT NULL,
  FIELD_ID SMALLINT NOT NULL,
  FIELD_VALUE VARCHAR(200) DEFAULT NULL,
   PRIMARY KEY(OFFICE_CUSTOM_FIELD_ID),
 FOREIGN KEY(OFFICE_ID)
    REFERENCES OFFICE(OFFICE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
) 
ENGINE=InnoDB CHARACTER SET utf8;


CREATE TABLE MFI_ATTRIBUTE (
  ATTRIBUTE_ID SMALLINT NOT NULL,
  OFFICE_ID SMALLINT NOT NULL,
  ATTRIBUTE_NAME VARCHAR(100) NOT NULL,
  ATTRIBUTE_VALUE VARCHAR(200) NOT NULL,
  PRIMARY KEY(ATTRIBUTE_ID),
  FOREIGN KEY(OFFICE_ID)
    REFERENCES OFFICE(OFFICE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;



CREATE TABLE HOLIDAY (
  OFFICE_ID SMALLINT NOT NULL,
  HOLIDAY_DATE DATE NOT NULL,
  HOLIDATY_NAME VARCHAR(100),
  PRIMARY KEY(OFFICE_ID, HOLIDAY_DATE),
  FOREIGN KEY(OFFICE_ID)
    REFERENCES OFFICE(OFFICE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE BRANCH_HO_UPDATE (
  OFFICE_ID SMALLINT NOT NULL,
  LAST_UPDATED_DATE DATE,
  PRIMARY KEY(OFFICE_ID),
  FOREIGN KEY(OFFICE_ID)
    REFERENCES OFFICE(OFFICE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE LOOKUP_VALUE_LOCALE (
  LOOKUP_VALUE_ID INTEGER AUTO_INCREMENT NOT NULL,
  LOCALE_ID SMALLINT NOT NULL,
  LOOKUP_ID INTEGER NOT NULL,
  LOOKUP_VALUE VARCHAR(300),
  PRIMARY KEY(LOOKUP_VALUE_ID),
  FOREIGN KEY(LOOKUP_ID)
    REFERENCES LOOKUP_VALUE(LOOKUP_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(LOCALE_ID)
    REFERENCES SUPPORTED_LOCALE(LOCALE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE LOOKUP_LABEL (
  LABEL_ID INTEGER NOT NULL,
  ENTITY_ID SMALLINT,
  LOCALE_ID SMALLINT,
  ENTITY_NAME VARCHAR(200),
  PRIMARY KEY(LABEL_ID),
  FOREIGN KEY(ENTITY_ID)
    REFERENCES LOOKUP_ENTITY(ENTITY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(LOCALE_ID)
    REFERENCES SUPPORTED_LOCALE(LOCALE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE CUSTOMER_STATE_FLAG (
  FLAG_ID SMALLINT NOT NULL,
  FLAG_LOOKUP_ID INTEGER NOT NULL,
  STATUS_ID SMALLINT NOT NULL,
  FLAG_DESCRIPTION VARCHAR(200) NOT NULL,
  ISBLACKLISTED SMALLINT,
  PRIMARY KEY(FLAG_ID),
  FOREIGN KEY(STATUS_ID)
    REFERENCES CUSTOMER_STATE(STATUS_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(FLAG_LOOKUP_ID)
    REFERENCES LOOKUP_VALUE(LOOKUP_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE PROGRAM (
  PROGRAM_ID INTEGER AUTO_INCREMENT NOT NULL,
  OFFICE_ID SMALLINT NOT NULL,
  LOOKUP_ID INTEGER NOT NULL,
  GLCODE_ID SMALLINT,
  PROGRAM_NAME VARCHAR(100),
  START_DATE DATE NOT NULL,
  END_DATE DATE,
  CONFIDENTIALITY SMALLINT,
  PRIMARY KEY(PROGRAM_ID),
  FOREIGN KEY(GLCODE_ID)
    REFERENCES GL_CODE(GLCODE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(LOOKUP_ID)
    REFERENCES LOOKUP_VALUE(LOOKUP_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(OFFICE_ID)
    REFERENCES OFFICE(OFFICE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE PERSONNEL (
  PERSONNEL_ID SMALLINT AUTO_INCREMENT NOT NULL,
  LEVEL_ID SMALLINT NOT NULL,
  GLOBAL_PERSONNEL_NUM VARCHAR(100),
  OFFICE_ID SMALLINT,
  TITLE INTEGER,
  PERSONNEL_STATUS SMALLINT,
  PREFERRED_LOCALE SMALLINT,
  SEARCH_ID VARCHAR(100),
  MAX_CHILD_COUNT INTEGER,
  PASSWORD BLOB(250),
  LOGIN_NAME VARCHAR(200),
  EMAIL_ID VARCHAR(255),
  PASSWORD_CHANGED SMALLINT NOT NULL,
  DISPLAY_NAME VARCHAR(200),
  CREATED_BY SMALLINT NOT NULL,
  CREATED_DATE DATE,
  UPDATED_BY SMALLINT,
  UPDATED_DATE DATE,
  LAST_LOGIN DATE,
  LOCKED SMALLINT NOT NULL,
  NO_OF_TRIES SMALLINT NOT NULL,
  VERSION_NO INTEGER NOT NULL,
  PRIMARY KEY(PERSONNEL_ID),
  FOREIGN KEY(OFFICE_ID)
    REFERENCES OFFICE(OFFICE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(CREATED_BY)
    REFERENCES PERSONNEL(PERSONNEL_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(LEVEL_ID)
    REFERENCES PERSONNEL_LEVEL(LEVEL_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(PREFERRED_LOCALE)
    REFERENCES SUPPORTED_LOCALE(LOCALE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(TITLE)
    REFERENCES LOOKUP_VALUE(LOOKUP_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(UPDATED_BY)
    REFERENCES PERSONNEL(PERSONNEL_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;



-- Seems not to be used by anything
CREATE TABLE  FEE_UPDATE_TYPE (
FEE_UPDATE_TYPE_ID SMALLINT AUTO_INCREMENT NOT NULL ,
LOOKUP_ID INTEGER NOT NULL,
PRIMARY KEY  (FEE_UPDATE_TYPE_ID),
FOREIGN KEY (LOOKUP_ID) REFERENCES LOOKUP_VALUE(LOOKUP_ID)
ON DELETE NO ACTION 
ON UPDATE NO ACTION
)ENGINE=InnoDB CHARACTER SET utf8;



CREATE TABLE FEE_FORMULA_MASTER (
  FORMULAID SMALLINT AUTO_INCREMENT NOT NULL,
  FORUMLA_LOOKUP_ID INTEGER NOT NULL ,
  PRIMARY KEY (FORMULAID),
  FOREIGN KEY (FORUMLA_LOOKUP_ID) REFERENCES LOOKUP_VALUE(LOOKUP_ID)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION
) ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE FEE_STATUS (
  STATUS_ID SMALLINT AUTO_INCREMENT NOT NULL,
  STATUS_LOOKUP_ID INTEGER NOT NULL ,
  PRIMARY KEY  (STATUS_ID),
  FOREIGN KEY (STATUS_LOOKUP_ID)
    REFERENCES LOOKUP_VALUE (LOOKUP_ID)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION
) ENGINE=InnoDB CHARACTER SET utf8;


CREATE TABLE FEES (
  FEE_ID SMALLINT AUTO_INCREMENT NOT NULL,
  GLOBAL_FEE_NUM VARCHAR(50),
  FEE_NAME VARCHAR(50) NOT  NULL,
  FEE_PAYMENTS_CATEGORY_TYPE_ID SMALLINT,
  OFFICE_ID SMALLINT NOT NULL,
  GLCODE_ID SMALLINT  NOT NULL,
  STATUS SMALLINT NOT NULL,
  CATEGORY_ID SMALLINT NOT NULL,
  RATE_OR_AMOUNT DECIMAL(16,5),
  RATE_OR_AMOUNT_CURRENCY_ID SMALLINT,
  RATE_FLAT_FALG SMALLINT,
  CREATED_DATE DATE  NOT NULL,
  CREATED_BY SMALLINT  NOT NULL,
  UPDATED_DATE DATE,
  UPDATED_BY SMALLINT,
  UPDATE_FLAG  SMALLINT,
  FORMULA_ID SMALLINT,
  DEFAULT_ADMIN_FEE VARCHAR(10),
  FEE_AMOUNT DECIMAL(10,3) ,
  FEE_AMOUNT_CURRENCY_ID SMALLINT,
  RATE DECIMAL(16,5),
  VERSION_NO INTEGER NOT NULL,
  DISCRIMINATOR VARCHAR(20),
  PRIMARY KEY  (FEE_ID),
  FOREIGN KEY (GLCODE_ID) 
    REFERENCES GL_CODE (GLCODE_ID)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  FOREIGN KEY (CATEGORY_ID) 
    REFERENCES CATEGORY_TYPE (CATEGORY_ID)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  FOREIGN KEY (STATUS) 
    REFERENCES FEE_STATUS (STATUS_ID)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  FOREIGN KEY (OFFICE_ID)
    REFERENCES OFFICE (OFFICE_ID)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  FOREIGN KEY (CREATED_BY)
    REFERENCES PERSONNEL (PERSONNEL_ID)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  FOREIGN KEY (UPDATED_BY)
    REFERENCES PERSONNEL (PERSONNEL_ID)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  FOREIGN KEY (FORMULA_ID)
    REFERENCES FEE_FORMULA_MASTER (FORMULAID)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  FOREIGN KEY(RATE_OR_AMOUNT_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(FEE_AMOUNT_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE FEELEVEL (
  FEELEVEL_ID SMALLINT AUTO_INCREMENT NOT NULL,
  FEE_ID SMALLINT NOT NULL,
  LEVEL_ID SMALLINT NOT NULL,
  PRIMARY KEY(FEELEVEL_ID),
  FOREIGN KEY(FEE_ID)
    REFERENCES FEES(FEE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
) ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE FEE_FREQUENCY_TYPE (
  FEE_FREQUENCY_ID SMALLINT AUTO_INCREMENT NOT NULL,
  LOOKUP_ID INTEGER NOT NULL,
  PRIMARY KEY  (FEE_FREQUENCY_ID),
  FOREIGN KEY (LOOKUP_ID) REFERENCES LOOKUP_VALUE(LOOKUP_ID)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION
) ENGINE=InnoDB CHARACTER SET utf8;


CREATE TABLE PERSONNEL_HIERARCHY (
  HIERARCHY_ID INTEGER NOT NULL,
  PARENT_ID SMALLINT NOT NULL,
  PERSONNEL_ID SMALLINT,
  STATUS SMALLINT,
  START_DATE DATE,
  END_DATE DATE NOT NULL,
  UPDATED_BY SMALLINT,
  UPDATED_DATE DATE,
  PRIMARY KEY(HIERARCHY_ID),
  FOREIGN KEY(PARENT_ID)
    REFERENCES PERSONNEL(PERSONNEL_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(PERSONNEL_ID)
    REFERENCES PERSONNEL(PERSONNEL_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(UPDATED_BY)
    REFERENCES PERSONNEL(PERSONNEL_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE ROLE (
  ROLE_ID SMALLINT NOT NULL,

  ROLE_NAME VARCHAR(50),
  DESCRIPTION VARCHAR(100) NOT NULL,
  VERSION_NO INTEGER  NOT NULL,
  CREATED_BY SMALLINT,
  CREATED_DATE DATE,
  UPDATED_BY SMALLINT,
  UPDATED_DATE DATE,
  PRIMARY KEY(ROLE_ID),
  FOREIGN KEY(CREATED_BY)
    REFERENCES PERSONNEL(PERSONNEL_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(UPDATED_BY)
    REFERENCES PERSONNEL(PERSONNEL_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE PENALTY (
  PENALTY_ID SMALLINT NOT NULL,
  GLOBAL_PENALTY_NUM VARCHAR(100),
  PENALTY_TYPE VARCHAR(100),
  OFFICE_ID SMALLINT,
  CATEGORY_ID SMALLINT,
  GLCODE_ID SMALLINT NOT NULL,
  LOOKUP_ID INTEGER,
  RATE DECIMAL(13, 10) NOT NULL,
  FORMULA VARCHAR(100),
  PRIMARY KEY(PENALTY_ID),
  FOREIGN KEY(CATEGORY_ID)
    REFERENCES CATEGORY_TYPE(CATEGORY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(GLCODE_ID)
    REFERENCES GL_CODE(GLCODE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(LOOKUP_ID)
    REFERENCES LOOKUP_VALUE(LOOKUP_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(OFFICE_ID)
    REFERENCES OFFICE(OFFICE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE OFFICE_ACTION_PAYMENT_TYPE (
  OFFICE_ID SMALLINT,
  PRD_TYPE_ID SMALLINT,
  ACCOUNT_ACTION_ID SMALLINT NOT NULL,
  PAYMENT_TYPE_ID SMALLINT,
  FOREIGN KEY(ACCOUNT_ACTION_ID)
    REFERENCES ACCOUNT_ACTION(ACCOUNT_ACTION_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(OFFICE_ID)
    REFERENCES OFFICE(OFFICE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(PAYMENT_TYPE_ID)
    REFERENCES PAYMENT_TYPE(PAYMENT_TYPE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(PRD_TYPE_ID)
    REFERENCES PRD_TYPE(PRD_TYPE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE CUSTOMER (
  CUSTOMER_ID INTEGER AUTO_INCREMENT NOT NULL,
  CUSTOMER_LEVEL_ID SMALLINT NOT NULL,
  GLOBAL_CUST_NUM VARCHAR(100),
  LOAN_OFFICER_ID SMALLINT,
  CUSTOMER_FORMEDBY_ID SMALLINT,
  STATUS_ID SMALLINT,
  BRANCH_ID SMALLINT,
  DISPLAY_NAME VARCHAR(200),
  FIRST_NAME   VARCHAR(200),
  LAST_NAME   VARCHAR(200),
  SECOND_LAST_NAME   VARCHAR(200),
  DISPLAY_ADDRESS VARCHAR(500),
  EXTERNAL_ID VARCHAR(50),
  DATE_OF_BIRTH DATE,
  GROUP_FLAG SMALLINT,
  TRAINED SMALLINT,
  TRAINED_DATE DATE,
  PARENT_CUSTOMER_ID INTEGER,
  CREATED_DATE DATE,
  UPDATED_DATE DATE,
  SEARCH_ID VARCHAR(100),
  MAX_CHILD_COUNT INTEGER,
  HO_UPDATED SMALLINT,
  CLIENT_CONFIDENTIAL SMALLINT,
  MFI_JOINING_DATE DATE,
  GOVERNMENT_ID	VARCHAR(50),
  CUSTOMER_ACTIVATION_DATE DATE,
  CREATED_BY SMALLINT,
  UPDATED_BY SMALLINT,
  BLACKLISTED SMALLINT,
  DISCRIMINATOR VARCHAR(20),
  VERSION_NO INTEGER NOT NULL,
  PRIMARY KEY(CUSTOMER_ID),
  FOREIGN KEY(CUSTOMER_LEVEL_ID)
    REFERENCES CUSTOMER_LEVEL(LEVEL_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(STATUS_ID)
    REFERENCES CUSTOMER_STATE(STATUS_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(BRANCH_ID)
    REFERENCES OFFICE(OFFICE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(LOAN_OFFICER_ID)
    REFERENCES PERSONNEL(PERSONNEL_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(CUSTOMER_FORMEDBY_ID)
    REFERENCES PERSONNEL(PERSONNEL_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE CUST_PERF_HISTORY (
  CUSTOMER_ID INTEGER NOT NULL,
  LOAN_CYCLE_COUNTER SMALLINT,
  LAST_LOAN_AMNT DECIMAL(10,3),
  ACTIVE_LOANS_COUNT SMALLINT,
  TOTAL_SAVINGS_AMNT DECIMAL(10,3),
  DELINQUINT_PORTFOLIO DECIMAL(10,3),
  PRIMARY KEY(CUSTOMER_ID),
  FOREIGN KEY(CUSTOMER_ID)
    REFERENCES CUSTOMER(CUSTOMER_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE CUSTOMER_SURVEY (
  CUSTOMER_SURVEY_ID INTEGER NOT NULL,
  CUSTOMER_ID INTEGER,
  SURVEY_ID INTEGER,
  STATUS_ID SMALLINT NOT NULL,
  COMPLETED SMALLINT NOT NULL,
  COMPLETED_DATE DATE NOT NULL,
  CREATED_BY SMALLINT NOT NULL,
  CREATED_DATE DATE,
  UPDATED_BY SMALLINT NOT NULL,
  UPDATED_DATE DATE NOT NULL,
  PRIMARY KEY(CUSTOMER_SURVEY_ID),
  FOREIGN KEY(CUSTOMER_ID)
    REFERENCES CUSTOMER(CUSTOMER_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(STATUS_ID)
    REFERENCES CUSTOMER_STATE(STATUS_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(CREATED_BY)
    REFERENCES PERSONNEL(PERSONNEL_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(UPDATED_BY)
    REFERENCES PERSONNEL(PERSONNEL_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(SURVEY_ID)
    REFERENCES SURVEY(SURVEY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE CUSTOMER_DETAIL (
  CUSTOMER_ID INTEGER NOT NULL,
  ETHINICITY INTEGER,
  CITIZENSHIP INTEGER,
  HANDICAPPED INTEGER,
  BUSINESS_ACTIVITIES INTEGER,
  MARITAL_STATUS INTEGER,
  EDUCATION_LEVEL INTEGER,
  NUM_CHILDREN SMALLINT,
  GENDER SMALLINT,
  DATE_STARTED DATE,
  HANDICAPPED_DETAILS VARCHAR(200),
  PRIMARY KEY(CUSTOMER_ID),
  FOREIGN KEY(CUSTOMER_ID)
    REFERENCES CUSTOMER(CUSTOMER_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(CITIZENSHIP)
    REFERENCES LOOKUP_VALUE(LOOKUP_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(EDUCATION_LEVEL)
    REFERENCES LOOKUP_VALUE(LOOKUP_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(ETHINICITY)
    REFERENCES LOOKUP_VALUE(LOOKUP_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(HANDICAPPED)
    REFERENCES LOOKUP_VALUE(LOOKUP_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(MARITAL_STATUS)
    REFERENCES LOOKUP_VALUE(LOOKUP_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE PRD_OFFERING (
  PRD_OFFERING_ID SMALLINT AUTO_INCREMENT NOT NULL,
  PRD_APPLICABLE_MASTER_ID SMALLINT NOT NULL,
  GLOBAL_PRD_OFFERING_NUM VARCHAR(50) NOT NULL,
  PRD_CATEGORY_ID SMALLINT  NOT NULL,
  PRD_TYPE_ID SMALLINT,
  OFFICE_ID SMALLINT,
  START_DATE DATE  NOT NULL,
  END_DATE DATE,
  GLCODE_ID SMALLINT,
  PRD_OFFERING_NAME VARCHAR(50) NOT NULL,
  PRD_OFFERING_SHORT_NAME VARCHAR(50) NOT NULL,
  OFFERING_STATUS_ID SMALLINT,
  DESCRIPTION VARCHAR(200),
  CREATED_DATE DATE NOT NULL,
  CREATED_BY INTEGER NOT NULL,
  UPDATED_DATE DATE,
  UPDATED_BY INTEGER,
  VERSION_NO INTEGER,
  PRIMARY KEY(PRD_OFFERING_ID),
  FOREIGN KEY(GLCODE_ID)
    REFERENCES GL_CODE(GLCODE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(OFFICE_ID)
    REFERENCES OFFICE(OFFICE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(PRD_CATEGORY_ID)
    REFERENCES PRD_CATEGORY(PRD_CATEGORY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(OFFERING_STATUS_ID)
    REFERENCES PRD_STATUS(OFFERING_STATUS_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(PRD_TYPE_ID)
    REFERENCES PRD_TYPE(PRD_TYPE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
   FOREIGN KEY(PRD_APPLICABLE_MASTER_ID)
    REFERENCES PRD_APPLICABLE_MASTER(PRD_APPLICABLE_MASTER_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE LOAN_OFFERING (
  PRD_OFFERING_ID SMALLINT NOT NULL,
  INTEREST_TYPE_ID SMALLINT NOT NULL,
  INTEREST_CALC_RULE_ID SMALLINT,
  PENALTY_ID SMALLINT,
  MIN_LOAN_AMOUNT DECIMAL(10, 3) NOT NULL,
  MIN_LOAN_AMOUNT_CURRENCY_ID SMALLINT,
  MAX_LOAN_AMNT DECIMAL(10, 3) NOT NULL,
  MAX_LOAN_AMNT_CURRENCY_ID SMALLINT,
  DEFAULT_LOAN_AMOUNT DECIMAL(10, 3),
  DEFAULT_LOAN_AMOUNT_CURRENCY_ID SMALLINT,
  GRACEPERIOD_TYPE_ID SMALLINT,
  MAX_INTEREST_RATE DECIMAL(13, 10) NOT NULL,
  MIN_INTEREST_RATE DECIMAL(13, 10) NOT NULL,
  DEF_INTEREST_RATE DECIMAL(13, 10) NOT NULL,
  MAX_NO_INSTALLMENTS SMALLINT NOT NULL,
  MIN_NO_INSTALLMENTS SMALLINT NOT NULL,
  DEF_NO_INSTALLMENTS SMALLINT NOT NULL,
  PENALTY_GRACE SMALLINT NOT NULL,
  LOAN_COUNTER_FLAG SMALLINT,
  INT_DED_DISBURSEMENT_FLAG SMALLINT NOT NULL,
  PRIN_DUE_LAST_INST_FLAG SMALLINT NOT NULL,
  PENALTY_RATE DECIMAL(13,10) ,
  GRACE_PERIOD_DURATION SMALLINT,
  PRINCIPAL_GLCODE_ID SMALLINT NOT NULL,
  INTEREST_GLCODE_ID SMALLINT NOT NULL,
  PENALTIES_GLCODE_ID SMALLINT NOT NULL,
  PRIMARY KEY(PRD_OFFERING_ID),
  FOREIGN KEY(PRINCIPAL_GLCODE_ID)
    REFERENCES GL_CODE(GLCODE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(INTEREST_GLCODE_ID)
    REFERENCES GL_CODE(GLCODE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,    
  CONSTRAINT LOAN_OFFERING_PENALTY_GLCODE FOREIGN KEY(PENALTIES_GLCODE_ID)
    REFERENCES GL_CODE(GLCODE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,    
  FOREIGN KEY(GRACEPERIOD_TYPE_ID)
    REFERENCES GRACE_PERIOD_TYPE(GRACE_PERIOD_TYPE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(PRD_OFFERING_ID)
    REFERENCES PRD_OFFERING(PRD_OFFERING_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
   CONSTRAINT LOAN_OFFERING_PENALTY FOREIGN KEY(PENALTY_ID)
    REFERENCES PENALTY(PENALTY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  CONSTRAINT LOAN_OFFERING_INTEREST_CALC_RULE FOREIGN KEY(INTEREST_CALC_RULE_ID)
    REFERENCES INTEREST_CALC_RULE(INTEREST_CALC_RULE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(INTEREST_TYPE_ID)
    REFERENCES INTEREST_TYPES(INTEREST_TYPE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(MIN_LOAN_AMOUNT_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(MAX_LOAN_AMNT_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(DEFAULT_LOAN_AMOUNT_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION     
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE SAVINGS_OFFERING (
  PRD_OFFERING_ID SMALLINT NOT NULL,
  INTEREST_CALCULATION_TYPE_ID SMALLINT NOT NULL,
  SAVINGS_TYPE_ID SMALLINT NOT NULL,
  RECOMMENDED_AMNT_UNIT_ID SMALLINT,
  RECOMMENDED_AMOUNT DECIMAL(10, 3),
  RECOMMENDED_AMOUNT_CURRENCY_ID SMALLINT,
  INTEREST_RATE DECIMAL(13, 10) NOT NULL,
  MAX_AMNT_WITHDRAWL DECIMAL(10,3),
  MAX_AMNT_WITHDRAWL_CURRENCY_ID SMALLINT,
  MIN_AMNT_FOR_INT DECIMAL(10,3),
  MIN_AMNT_FOR_INT_CURRENCY_ID SMALLINT,
  DEPOSIT_GLCODE_ID SMALLINT NOT NULL,
  INTEREST_GLCODE_ID SMALLINT NOT NULL,
  PRIMARY KEY(PRD_OFFERING_ID),
  FOREIGN KEY(PRD_OFFERING_ID)
    REFERENCES PRD_OFFERING(PRD_OFFERING_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
   FOREIGN KEY(RECOMMENDED_AMNT_UNIT_ID)
    REFERENCES RECOMMENDED_AMNT_UNIT(RECOMMENDED_AMNT_UNIT_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(SAVINGS_TYPE_ID)
    REFERENCES SAVINGS_TYPE(SAVINGS_TYPE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
   FOREIGN KEY(INTEREST_CALCULATION_TYPE_ID)
    REFERENCES INTEREST_CALCULATION_TYPES(INTEREST_CALCULATION_TYPE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(RECOMMENDED_AMOUNT_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(MAX_AMNT_WITHDRAWL_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(MIN_AMNT_FOR_INT_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(DEPOSIT_GLCODE_ID)
    REFERENCES GL_CODE(GLCODE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(INTEREST_GLCODE_ID)
    REFERENCES GL_CODE(GLCODE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE INSURANCE_OFFERING (
  PRD_OFFERING_ID SMALLINT NOT NULL,
  PRIMARY KEY(PRD_OFFERING_ID),
  FOREIGN KEY(PRD_OFFERING_ID)
    REFERENCES PRD_OFFERING(PRD_OFFERING_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE PERSONNEL_DETAILS (
  PERSONNEL_ID SMALLINT NOT NULL ,
  FIRST_NAME VARCHAR(100) NOT NULL,
  MIDDLE_NAME VARCHAR(100),
  SECOND_LAST_NAME VARCHAR(100),
  LAST_NAME VARCHAR(100),
  GOVERNMENT_ID_NUMBER VARCHAR(50),
  DOB DATE NOT NULL,
  MARITAL_STATUS INTEGER,
  GENDER INTEGER  NOT NULL,
  DATE_OF_JOINING_MFI DATE,
  DATE_OF_JOINING_BRANCH DATE,
  DATE_OF_LEAVING_BRANCH DATE,
  ADDRESS_1 VARCHAR(200),
  ADDRESS_2 VARCHAR(200),
  ADDRESS_3 VARCHAR(200),
  CITY VARCHAR(100),
  STATE VARCHAR(100),
  COUNTRY VARCHAR(100),
  POSTAL_CODE VARCHAR(100),
  TELEPHONE VARCHAR(20),
  FOREIGN KEY(PERSONNEL_ID)
    REFERENCES PERSONNEL(PERSONNEL_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(GENDER)
    REFERENCES LOOKUP_VALUE(LOOKUP_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(MARITAL_STATUS)
    REFERENCES LOOKUP_VALUE(LOOKUP_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE PERSONNEL_MOVEMENT (
  PERSONNEL_MOVEMENT_ID SMALLINT AUTO_INCREMENT NOT NULL,
  PERSONNEL_ID SMALLINT,
  OFFICE_ID SMALLINT NOT NULL,
  STATUS SMALLINT,
  START_DATE DATE,
  END_DATE DATE,
  UPDATED_BY SMALLINT,
  UPDATED_DATE DATE ,
  PRIMARY KEY(PERSONNEL_MOVEMENT_ID),
  FOREIGN KEY(PERSONNEL_ID)
    REFERENCES PERSONNEL(PERSONNEL_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(UPDATED_BY)
    REFERENCES PERSONNEL(PERSONNEL_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(OFFICE_ID)
    REFERENCES OFFICE(OFFICE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE PERSONNEL_NOTES (
  COMMENT_ID INTEGER AUTO_INCREMENT NOT NULL,
  PERSONNEL_ID SMALLINT NOT NULL,
  COMMENT_DATE DATE NOT NULL,
  COMMENTS VARCHAR(500) NOT NULL,
  OFFICER_ID SMALLINT,
  PRIMARY KEY(COMMENT_ID),
  FOREIGN KEY(PERSONNEL_ID)
    REFERENCES PERSONNEL(PERSONNEL_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(OFFICER_ID)
    REFERENCES PERSONNEL(PERSONNEL_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE PERSONNEL_STATUS (
  PERSONNEL_STATUS_ID SMALLINT AUTO_INCREMENT NOT NULL,
  LOOKUP_ID INTEGER NOT NULL,
  PRIMARY KEY(PERSONNEL_STATUS_ID),
  FOREIGN KEY(LOOKUP_ID)
    REFERENCES LOOKUP_VALUE(LOOKUP_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE ENTITY_MASTER (
   ENTITY_TYPE_ID SMALLINT AUTO_INCREMENT NOT NULL,
   ENTITY_TYPE VARCHAR(100) NOT NULL,
   PRIMARY KEY (ENTITY_TYPE_ID)
)ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE CUSTOM_FIELD_DEFINITION (
  FIELD_ID SMALLINT NOT NULL,
  ENTITY_ID SMALLINT NOT NULL,
  LEVEL_ID SMALLINT,
  FIELD_TYPE SMALLINT,
  ENTITY_TYPE SMALLINT NOT NULL,
  MANDATORY_FLAG SMALLINT NOT NULL,
  DEFAULT_VALUE VARCHAR(200),
  PRIMARY KEY(FIELD_ID),
  FOREIGN KEY(LEVEL_ID)
    REFERENCES CUSTOMER_LEVEL(LEVEL_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(ENTITY_ID)
    REFERENCES LOOKUP_ENTITY(ENTITY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(ENTITY_TYPE)
    REFERENCES ENTITY_MASTER(ENTITY_TYPE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE CHANGE_LOG (
  CHANGE_LOG_ID INTEGER AUTO_INCREMENT NOT NULL,
  CHANGED_BY SMALLINT NOT NULL,
  MODIFIER_NAME VARCHAR(50) NOT NULL,
  ENTITY_ID INTEGER DEFAULT NULL,
  ENTITY_TYPE SMALLINT DEFAULT NULL,
  CHANGED_DATE DATE DEFAULT NULL,
  FIELDS_CHANGED VARCHAR(250) DEFAULT NULL,
  PRIMARY KEY  (CHANGE_LOG_ID),
  FOREIGN KEY(CHANGED_BY)
    REFERENCES PERSONNEL(PERSONNEL_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
) ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE CUSTOMER_PICTURE (
  PICTURE_ID INTEGER AUTO_INCREMENT NOT NULL,
  CUSTOMER_ID INTEGER NOT NULL,
  PICTURE BLOB,
  PRIMARY KEY(PICTURE_ID),
  FOREIGN KEY(CUSTOMER_ID)
    REFERENCES CUSTOMER(CUSTOMER_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE CUSTOMER_HISTORICAL_DATA (
  HISTORICAL_ID SMALLINT AUTO_INCREMENT NOT NULL,
  CUSTOMER_ID INTEGER NOT NULL,
  PRODUCT_NAME VARCHAR(100),
  LOAN_AMOUNT DECIMAL(10,3),
  LOAN_AMOUNT_CURRENCY_ID SMALLINT,
  TOTAL_AMOUNT_PAID DECIMAL(10,3),
  TOTAL_AMOUNT_PAID_CURRENCY_ID SMALLINT,  
  INTEREST_PAID DECIMAL(10,3),
  INTEREST_PAID_CURRENCY_ID SMALLINT,
  MISSED_PAYMENTS_COUNT INTEGER,
  TOTAL_PAYMENTS_COUNT INTEGER,
  NOTES VARCHAR(500),
  LOAN_CYCLE_NUMBER INTEGER,
  CREATED_BY SMALLINT,
  UPDATED_BY SMALLINT,
  CREATED_DATE DATE,
  UPDATED_DATE DATE,
  VERSION_NO INTEGER,
  PRIMARY KEY(HISTORICAL_ID),
  FOREIGN KEY(CUSTOMER_ID)
    REFERENCES CUSTOMER(CUSTOMER_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE CUSTOMER_ADDRESS_DETAIL (
  CUSTOMER_ADDRESS_ID INTEGER AUTO_INCREMENT NOT NULL,
  CUSTOMER_ID INTEGER,
  LOCALE_ID SMALLINT,
  ADDRESS_NAME VARCHAR(100),
  LINE_1 VARCHAR(200),
  LINE_2 VARCHAR(200),
  LINE_3 VARCHAR(200),
  CITY VARCHAR(100),
  STATE VARCHAR(100),
  COUNTRY VARCHAR(100),
  ZIP VARCHAR(20),
  ADDRESS_STATUS SMALLINT,
  PHONE_NUMBER VARCHAR(20),
  PRIMARY KEY(CUSTOMER_ADDRESS_ID),
  FOREIGN KEY(CUSTOMER_ID)
    REFERENCES CUSTOMER(CUSTOMER_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(LOCALE_ID)
    REFERENCES SUPPORTED_LOCALE(LOCALE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE CUSTOMER_CUSTOM_FIELD (
  CUSTOMER_CUSTOMFIELD_ID INTEGER AUTO_INCREMENT NOT NULL,
  CUSTOMER_ID INTEGER NOT NULL,
  FIELD_ID SMALLINT NOT NULL,
  FIELD_VALUE VARCHAR(200),
  PRIMARY KEY(CUSTOMER_CUSTOMFIELD_ID),
  FOREIGN KEY(FIELD_ID)
    REFERENCES CUSTOM_FIELD_DEFINITION(FIELD_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(CUSTOMER_ID)
    REFERENCES CUSTOMER(CUSTOMER_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE OFFERING_FUND (
  OFFERING_FUND_ID SMALLINT NOT NULL,
  FUND_ID SMALLINT,
  PRD_OFFERING_ID SMALLINT,
  PRIMARY KEY(OFFERING_FUND_ID),
  FOREIGN KEY(FUND_ID)
    REFERENCES FUND(FUND_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(PRD_OFFERING_ID)
    REFERENCES PRD_OFFERING(PRD_OFFERING_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE PRD_OFFERING_FEES (
  PRD_OFFERING_FEE_ID SMALLINT AUTO_INCREMENT NOT NULL,
  FEE_ID SMALLINT,
  PRD_OFFERING_ID SMALLINT,
  PRIMARY KEY(PRD_OFFERING_FEE_ID),
  FOREIGN KEY(FEE_ID)
    REFERENCES FEES(FEE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(PRD_OFFERING_ID)
    REFERENCES PRD_OFFERING(PRD_OFFERING_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE PROGRAM_FUND (
  PROGRAM_FUND_ID SMALLINT NOT NULL,
  FUND_ID SMALLINT,
  PROGRAM_ID INTEGER,
  PRIMARY KEY(PROGRAM_FUND_ID),
  FOREIGN KEY(FUND_ID)
    REFERENCES FUND(FUND_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(PROGRAM_ID)
    REFERENCES PROGRAM(PROGRAM_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE PERSONNEL_CUSTOM_FIELD (
  PERSONNEL_CUSTOM_FIELD_ID INTEGER AUTO_INCREMENT NOT NULL,
  FIELD_ID SMALLINT NOT NULL,
  PERSONNEL_ID SMALLINT NOT NULL,
  FIELD_VALUE VARCHAR(100),
  PRIMARY KEY(PERSONNEL_CUSTOM_FIELD_ID),
  FOREIGN KEY(PERSONNEL_ID)
    REFERENCES PERSONNEL(PERSONNEL_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(FIELD_ID)
    REFERENCES CUSTOM_FIELD_DEFINITION(FIELD_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE ROLES_ACTIVITY (
  ACTIVITY_ID SMALLINT NOT NULL,
  ROLE_ID SMALLINT NOT NULL,
  VERSION_NO INTEGER DEFAULT 0 NOT NULL,
  PRIMARY KEY(ACTIVITY_ID, ROLE_ID),
  FOREIGN KEY(ACTIVITY_ID)
    REFERENCES ACTIVITY(ACTIVITY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(ROLE_ID)
    REFERENCES ROLE(ROLE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE PERSONNEL_ROLE (
  PERSONNEL_ROLE_ID INTEGER AUTO_INCREMENT NOT NULL,
  ROLE_ID SMALLINT NOT NULL,
  PERSONNEL_ID SMALLINT NOT NULL,
  PRIMARY KEY(PERSONNEL_ROLE_ID),
  FOREIGN KEY(PERSONNEL_ID)
    REFERENCES PERSONNEL(PERSONNEL_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(ROLE_ID)
    REFERENCES ROLE(ROLE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE MEETING (
 MEETING_ID INTEGER AUTO_INCREMENT NOT NULL,
 MEETING_TYPE_ID SMALLINT NOT NULL,
 MEETING_PLACE VARCHAR(200),
 START_DATE DATE,
 END_DATE DATE,
 START_TIME DATE,
 END_TIME DATE,
 VERSION_NO INTEGER,
 PRIMARY KEY(MEETING_ID),
   FOREIGN KEY(MEETING_TYPE_ID)
    REFERENCES MEETING_TYPE(MEETING_TYPE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8; 


CREATE TABLE FEE_FREQUENCY (
  FEE_FREQUENCY_ID SMALLINT AUTO_INCREMENT NOT NULL,
  FEE_ID SMALLINT NOT NULL ,
  FEE_FREQUENCYTYPE_ID SMALLINT NOT NULL ,
  FREQUENCY_PAYMENT_ID SMALLINT,
  FREQUENCY_MEETING_ID INTEGER,
  PRIMARY KEY  (FEE_FREQUENCY_ID),
  FOREIGN KEY (FEE_ID)
    REFERENCES FEES (FEE_ID)
    ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY (FEE_FREQUENCYTYPE_ID)
    REFERENCES FEE_FREQUENCY_TYPE (FEE_FREQUENCY_ID)
    ON DELETE NO ACTION
     ON UPDATE NO ACTION,
  FOREIGN KEY (FREQUENCY_PAYMENT_ID)
    REFERENCES FEE_PAYMENT (FEE_PAYMENT_ID)
    ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY (FREQUENCY_MEETING_ID)
    REFERENCES MEETING (MEETING_ID)
    ON DELETE NO ACTION
      ON UPDATE NO ACTION
) ENGINE=InnoDB CHARACTER SET utf8;
   
CREATE TABLE RECURRENCE_DETAIL (
  DETAILS_ID INTEGER AUTO_INCREMENT NOT NULL,
  MEETING_ID INTEGER NOT NULL, 
  RECURRENCE_ID SMALLINT,
  RECUR_AFTER SMALLINT NOT NULL,
  VERSION_NO INTEGER,
  PRIMARY KEY(DETAILS_ID),
  FOREIGN KEY(RECURRENCE_ID)
    REFERENCES RECURRENCE_TYPE(RECURRENCE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(MEETING_ID)
    REFERENCES MEETING(MEETING_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION      
)
ENGINE=InnoDB CHARACTER SET utf8; 

CREATE TABLE RECUR_ON_DAY (
  RECUR_ON_DAY_ID INTEGER  AUTO_INCREMENT NOT NULL,
  DETAILS_ID INTEGER NOT NULL,
  DAYS  SMALLINT,
  RANK_OF_DAYS SMALLINT,
  DAY_NUMBER SMALLINT,
  VERSION_NO INTEGER,
    PRIMARY KEY(RECUR_ON_DAY_ID),
    FOREIGN KEY(DETAILS_ID)
    REFERENCES RECURRENCE_DETAIL(DETAILS_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(DAYS)
    REFERENCES WEEK_DAYS_MASTER(WEEK_DAYS_MASTER_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(RANK_OF_DAYS)
    REFERENCES RANK_DAYS_MASTER(RANK_DAYS_MASTER_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION            
)
ENGINE=InnoDB CHARACTER SET utf8;


CREATE TABLE CUSTOMER_MEETING (
  CUSTOMER_MEETING_ID INTEGER AUTO_INCREMENT NOT NULL,
  MEETING_ID INTEGER NOT NULL,
  CUSTOMER_ID INTEGER NOT NULL,
  UPDATED_FLAG SMALLINT NOT NULL,
  PRIMARY KEY(CUSTOMER_MEETING_ID),
  FOREIGN KEY(CUSTOMER_ID)
    REFERENCES CUSTOMER(CUSTOMER_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(MEETING_ID)
    REFERENCES MEETING(MEETING_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE INHERITED_MEETING (
  MEETING_ID INTEGER,
  CUSTOMER_ID INTEGER,
  FOREIGN KEY(CUSTOMER_ID)
    REFERENCES CUSTOMER(CUSTOMER_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(MEETING_ID)
    REFERENCES CUSTOMER_MEETING(CUSTOMER_MEETING_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE CUSTOMER_MEETING_DETAIL (
  MEETING_ID INTEGER NOT NULL,
  DETAILS_ID INTEGER NOT NULL,
  PRIMARY KEY(MEETING_ID, DETAILS_ID),
  FOREIGN KEY(MEETING_ID)
    REFERENCES CUSTOMER_MEETING(CUSTOMER_MEETING_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(DETAILS_ID)
    REFERENCES RECURRENCE_DETAIL(DETAILS_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE CUSTOMER_PROGRAM (
  PROGRAM_ID INTEGER NOT NULL,
  CUSTOMER_ID INTEGER NOT NULL,
  VERSION_NO INTEGER NOT NULL,
  PRIMARY KEY(PROGRAM_ID, CUSTOMER_ID),
  FOREIGN KEY(CUSTOMER_ID)
    REFERENCES CUSTOMER(CUSTOMER_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(PROGRAM_ID)
    REFERENCES PROGRAM(PROGRAM_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE LOAN_OFFERING_FUND (
  LOAN_OFFERING_FUND_ID SMALLINT  AUTO_INCREMENT NOT NULL,
  FUND_ID SMALLINT NOT NULL,
  PRD_OFFERING_ID SMALLINT NOT NULL,
  PRIMARY KEY(LOAN_OFFERING_FUND_ID),
  FOREIGN KEY(PRD_OFFERING_ID)
    REFERENCES LOAN_OFFERING(PRD_OFFERING_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(FUND_ID)
    REFERENCES FUND(FUND_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE CUSTOMER_NOTE (
  COMMENT_ID INTEGER AUTO_INCREMENT NOT NULL,
  CUSTOMER_ID INTEGER NOT NULL,
  FIELD_OFFICER_ID SMALLINT NOT NULL,
  COMMENT_DATE DATE NOT NULL,
  COMMENT VARCHAR(500) NOT NULL,
  PRIMARY KEY(COMMENT_ID),
  FOREIGN KEY(CUSTOMER_ID)
    REFERENCES CUSTOMER(CUSTOMER_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(FIELD_OFFICER_ID)
    REFERENCES PERSONNEL(PERSONNEL_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE CUSTOMER_POSITION (
  CUSTOMER_POSITION_ID SMALLINT AUTO_INCREMENT NOT NULL,
  POSITION_ID INTEGER  NOT NULL,
  CUSTOMER_ID INTEGER,
  PARENT_CUSTOMER_ID INTEGER,
  VERSION_NO INTEGER,
  PRIMARY KEY(CUSTOMER_POSITION_ID),
  FOREIGN KEY(CUSTOMER_ID)
    REFERENCES CUSTOMER(CUSTOMER_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION

)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE PRD_FEE_FREQUENCY (
  PRDOFFERING_FEE_ID SMALLINT NOT NULL,
  FEE_ID SMALLINT,
  FREQUENCY_ID SMALLINT NOT NULL,
  PRIMARY KEY(PRDOFFERING_FEE_ID),
  FOREIGN KEY(FEE_ID)
    REFERENCES FEES(FEE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(PRDOFFERING_FEE_ID)
    REFERENCES PRD_OFFERING_FEES(PRD_OFFERING_FEE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(FREQUENCY_ID)
    REFERENCES RECURRENCE_TYPE(RECURRENCE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE PRD_SURVEY (
  PRD_SURVEYID SMALLINT NOT NULL,
  PRD_OFFERING_ID SMALLINT,
  ACCOUNT_STATE_ID SMALLINT,
  SURVEY_TEMPLATE_ID SMALLINT,
  PRIMARY KEY(PRD_SURVEYID),
  FOREIGN KEY(ACCOUNT_STATE_ID)
    REFERENCES ACCOUNT_STATE(ACCOUNT_STATE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(PRD_OFFERING_ID)
    REFERENCES PRD_OFFERING(PRD_OFFERING_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(SURVEY_TEMPLATE_ID)
    REFERENCES SURVEY_TEMPLATE(SURVEY_TEMPLATE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE OFFICE_HIERARCHY (
  HIERARCHY_ID INTEGER AUTO_INCREMENT NOT NULL,
  PARENT_ID SMALLINT NOT NULL,
  OFFICE_ID SMALLINT,
  STATUS SMALLINT,
  START_DATE DATE,
  END_DATE DATE,
  UPDATED_BY SMALLINT,
  UPDATED_DATE DATE,
  PRIMARY KEY(HIERARCHY_ID),
  FOREIGN KEY(OFFICE_ID)
    REFERENCES OFFICE(OFFICE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(PARENT_ID)
    REFERENCES OFFICE(OFFICE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(UPDATED_BY)
    REFERENCES PERSONNEL(PERSONNEL_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE CUSTOMER_HIERARCHY (
  HIERARCHY_ID INTEGER AUTO_INCREMENT NOT NULL,
  PARENT_ID INTEGER NOT NULL,
  CUSTOMER_ID INTEGER,
  STATUS SMALLINT,
  START_DATE DATE,
  END_DATE DATE,
  UPDATED_BY SMALLINT,
  UPDATED_DATE DATE,
  PRIMARY KEY(HIERARCHY_ID),
  FOREIGN KEY(CUSTOMER_ID)
    REFERENCES CUSTOMER(CUSTOMER_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(PARENT_ID)
    REFERENCES CUSTOMER(CUSTOMER_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(UPDATED_BY)
    REFERENCES PERSONNEL(PERSONNEL_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE CUSTOMER_FLAG_DETAIL (
  CUSTOMER_FLAG_ID INTEGER AUTO_INCREMENT NOT NULL,
  CUSTOMER_ID INTEGER NOT NULL,
  FLAG_ID SMALLINT NOT NULL,
  CREATED_BY SMALLINT,
  CREATED_DATE DATE,
  VERSION_NO INTEGER,
  PRIMARY KEY(CUSTOMER_FLAG_ID),
  FOREIGN KEY(CUSTOMER_ID)
    REFERENCES CUSTOMER(CUSTOMER_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(FLAG_ID)
    REFERENCES CUSTOMER_STATE_FLAG(FLAG_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(CREATED_BY)
    REFERENCES PERSONNEL(PERSONNEL_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE CUSTOMER_NAME_DETAIL (
  CUSTOMER_NAME_ID INTEGER AUTO_INCREMENT NOT NULL,
  CUSTOMER_ID INTEGER,
  NAME_TYPE SMALLINT,
  LOCALE_ID SMALLINT,
  SALUTATION INTEGER,
  FIRST_NAME VARCHAR(100) NOT NULL,
  MIDDLE_NAME VARCHAR(100),
  LAST_NAME VARCHAR(100) NOT NULL,
  SECOND_LAST_NAME VARCHAR(100),
  SECOND_MIDDLE_NAME VARCHAR(100),
  DISPLAY_NAME VARCHAR(200),
  PRIMARY KEY(CUSTOMER_NAME_ID),
  FOREIGN KEY(CUSTOMER_ID)
    REFERENCES CUSTOMER(CUSTOMER_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(SALUTATION)
    REFERENCES LOOKUP_VALUE(LOOKUP_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(LOCALE_ID)
    REFERENCES SUPPORTED_LOCALE(LOCALE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE CHECKLIST (
  CHECKLIST_ID SMALLINT AUTO_INCREMENT NOT NULL,
  CHECKLIST_NAME VARCHAR(100),
  CHECKLIST_STATUS SMALLINT  DEFAULT 1  NOT NULL,
  LOCALE_ID SMALLINT NOT NULL,
  CREATED_BY SMALLINT,
  CREATED_DATE DATE,
  UPDATED_BY SMALLINT,
  UPDATED_DATE DATE,
  PRIMARY KEY(CHECKLIST_ID),
  FOREIGN KEY(LOCALE_ID)
    REFERENCES SUPPORTED_LOCALE(LOCALE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(CREATED_BY)
    REFERENCES PERSONNEL(PERSONNEL_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(UPDATED_BY)
    REFERENCES PERSONNEL(PERSONNEL_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE ACCOUNT (
  ACCOUNT_ID INTEGER AUTO_INCREMENT NOT NULL,
  GLOBAL_ACCOUNT_NUM VARCHAR(100),
  CUSTOMER_ID INTEGER,
  ACCOUNT_STATE_ID SMALLINT,
  ACCOUNT_TYPE_ID SMALLINT NOT NULL,
  OFFICE_ID SMALLINT,
  PERSONNEL_ID SMALLINT,
  CREATED_BY SMALLINT NOT NULL,
  CREATED_DATE DATE NOT NULL,
  UPDATED_BY SMALLINT,
  UPDATED_DATE DATE,
  CLOSED_DATE DATE,
  VERSION_NO INTEGER,
  PRIMARY KEY(ACCOUNT_ID),
  FOREIGN KEY(ACCOUNT_STATE_ID)
    REFERENCES ACCOUNT_STATE(ACCOUNT_STATE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(ACCOUNT_TYPE_ID)
    REFERENCES ACCOUNT_TYPE(ACCOUNT_TYPE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(CUSTOMER_ID)
    REFERENCES CUSTOMER(CUSTOMER_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(PERSONNEL_ID)
    REFERENCES PERSONNEL(PERSONNEL_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(OFFICE_ID)
    REFERENCES OFFICE(OFFICE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION      
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE ACCOUNT_ACTIVITY (
  ACTIVITY_ID INTEGER AUTO_INCREMENT NOT NULL,
  ACCOUNT_ID INTEGER NOT NULL,
  PERSONNEL_ID SMALLINT NOT NULL,
  ACTIVITY_NAME VARCHAR(50) NOT NULL,
  PRINCIPAL DECIMAL(10, 3),
  PRINCIPAL_CURRENCY_ID SMALLINT,  
  PRINCIPAL_OUTSTANDING DECIMAL(10, 3),
  PRINCIPAL_OUTSTANDING_CURRENCY_ID SMALLINT,
  INTEREST DECIMAL(13, 10),
  INTEREST_CURRENCY_ID SMALLINT,
  INTEREST_OUTSTANDING DECIMAL(13, 10),
  INTEREST_OUTSTANDING_CURRENCY_ID SMALLINT,  
  FEE DECIMAL(13, 2),
  FEE_CURRENCY_ID SMALLINT,  
  FEE_OUTSTANDING DECIMAL(13, 2),
  FEE_OUTSTANDING_CURRENCY_ID SMALLINT,  
  PENALTY DECIMAL(13, 10),
  PENALTY_CURRENCY_ID SMALLINT,  
  PENALTY_OUTSTANDING DECIMAL(13, 10), 	
  PENALTY_OUTSTANDING_CURRENCY_ID SMALLINT, 	  
  PRIMARY KEY(ACTIVITY_ID),
  FOREIGN KEY(ACCOUNT_ID)
    REFERENCES ACCOUNT(ACCOUNT_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
 FOREIGN KEY(PRINCIPAL_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
 FOREIGN KEY(PRINCIPAL_OUTSTANDING_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
 FOREIGN KEY(INTEREST_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
 FOREIGN KEY(INTEREST_OUTSTANDING_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
 FOREIGN KEY(FEE_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
 FOREIGN KEY(FEE_OUTSTANDING_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
 FOREIGN KEY(PENALTY_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
 FOREIGN KEY(PENALTY_OUTSTANDING_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE ACCOUNT_NOTES (
  ACCOUNT_NOTES_ID INTEGER  AUTO_INCREMENT NOT NULL,
  ACCOUNT_ID INTEGER NOT NULL,
  NOTE VARCHAR(500) NOT NULL,
  COMMENT_DATE DATE NOT NULL,
  OFFICER_ID SMALLINT NOT NULL,
  PRIMARY KEY(ACCOUNT_NOTES_ID),
  FOREIGN KEY(ACCOUNT_ID)
    REFERENCES ACCOUNT(ACCOUNT_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(OFFICER_ID)
    REFERENCES PERSONNEL(PERSONNEL_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;


CREATE TABLE CUSTOMER_MOVEMENT (
  CUSTOMER_MOVEMENT_ID INTEGER AUTO_INCREMENT NOT NULL,
  CUSTOMER_ID INTEGER,
  PERSONNEL_ID SMALLINT,
  OFFICE_ID SMALLINT NOT NULL,
  STATUS SMALLINT,
  START_DATE DATE,
  END_DATE DATE,
  UPDATED_BY SMALLINT,
  UPDATED_DATE DATE,
  PRIMARY KEY(CUSTOMER_MOVEMENT_ID),
  FOREIGN KEY(CUSTOMER_ID)
    REFERENCES CUSTOMER(CUSTOMER_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(OFFICE_ID)
    REFERENCES OFFICE(OFFICE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(PERSONNEL_ID)
    REFERENCES PERSONNEL(PERSONNEL_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(UPDATED_BY)
    REFERENCES PERSONNEL(PERSONNEL_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE LOAN_ACCOUNT (
  ACCOUNT_ID INTEGER NOT NULL,
  BUSINESS_ACTIVITIES_ID INTEGER,
  COLLATERAL_TYPE_ID SMALLINT,
  GRACE_PERIOD_TYPE_ID SMALLINT NOT NULL,
  GROUP_FLAG SMALLINT,
  LOAN_AMOUNT DECIMAL(10, 3),
  LOAN_AMOUNT_CURRENCY_ID SMALLINT,
  LOAN_BALANCE DECIMAL(10, 3),
  LOAN_BALANCE_CURRENCY_ID SMALLINT,
  INTEREST_TYPE_ID SMALLINT,
  INTEREST_RATE DECIMAL(13, 10),
  FUND_ID SMALLINT,
  MEETING_ID INTEGER,
  CURRENCY_ID SMALLINT,
  NO_OF_INSTALLMENTS SMALLINT NOT NULL,
  DISBURSEMENT_DATE DATE,
  COLLATERAL_NOTE TEXT,
  GRACE_PERIOD_DURATION SMALLINT,
  INTEREST_AT_DISB SMALLINT,
  GRACE_PERIOD_PENALTY SMALLINT,
  PRD_OFFERING_ID SMALLINT,	
  PRIMARY KEY(ACCOUNT_ID),
  FOREIGN KEY(ACCOUNT_ID)
    REFERENCES ACCOUNT(ACCOUNT_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
	FOREIGN KEY(CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(LOAN_AMOUNT_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(LOAN_BALANCE_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(FUND_ID)
    REFERENCES FUND(FUND_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(GRACE_PERIOD_TYPE_ID)
    REFERENCES GRACE_PERIOD_TYPE(GRACE_PERIOD_TYPE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(INTEREST_TYPE_ID)
    REFERENCES INTEREST_TYPES(INTEREST_TYPE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(MEETING_ID)
    REFERENCES MEETING(MEETING_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
   FOREIGN KEY(COLLATERAL_TYPE_ID)
    REFERENCES COLLATERAL_TYPE(COLLATERAL_TYPE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
   FOREIGN KEY(BUSINESS_ACTIVITIES_ID)
    REFERENCES LOOKUP_VALUE(LOOKUP_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(PRD_OFFERING_ID)
    REFERENCES PRD_OFFERING(PRD_OFFERING_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION     
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE LOAN_ACTIVITY_DETAILS (
  ID INTEGER AUTO_INCREMENT NOT NULL,
  CREATED_BY SMALLINT NOT NULL,
  ACCOUNT_ID INTEGER NOT NULL,	
  CREATED_DATE TIMESTAMP NOT NULL,
  COMMENTS VARCHAR(100) NOT NULL,
  PRINCIPAL_AMOUNT DECIMAL(10, 3),
  PRINCIPAL_AMOUNT_CURRENCY_ID SMALLINT,
  INTEREST_AMOUNT DECIMAL(10, 3),
  INTEREST_AMOUNT_CURRENCY_ID SMALLINT,
  PENALTY_AMOUNT DECIMAL(10, 3),
  PENALTY_AMOUNT_CURRENCY_ID SMALLINT,
  FEE_AMOUNT DECIMAL(10, 3),
  FEE_AMOUNT_CURRENCY_ID SMALLINT,
  BALANCE_PRINCIPAL_AMOUNT DECIMAL(10, 3),
  BALANCE_PRINCIPAL_AMOUNT_CURRENCY_ID SMALLINT,
  BALANCE_INTEREST_AMOUNT DECIMAL(10, 3),
  BALANCE_INTEREST_AMOUNT_CURRENCY_ID SMALLINT,
  BALANCE_PENALTY_AMOUNT DECIMAL(10, 3),
  BALANCE_PENALTY_AMOUNT_CURRENCY_ID SMALLINT,
  BALANCE_FEE_AMOUNT DECIMAL(10, 3),
  BALANCE_FEE_AMOUNT_CURRENCY_ID SMALLINT,		
  PRIMARY KEY(ID),
  FOREIGN KEY(CREATED_BY)
    REFERENCES PERSONNEL(PERSONNEL_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(ACCOUNT_ID)
    REFERENCES ACCOUNT(ACCOUNT_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(PRINCIPAL_AMOUNT_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(INTEREST_AMOUNT_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(FEE_AMOUNT_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(PENALTY_AMOUNT_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(BALANCE_PRINCIPAL_AMOUNT_CURRENCY_ID)
  REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(BALANCE_INTEREST_AMOUNT_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(BALANCE_PENALTY_AMOUNT_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(BALANCE_FEE_AMOUNT_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION        
	
)
ENGINE=InnoDB CHARACTER SET utf8;


CREATE TABLE WAIVE_OFF_HISTORY(
WAIVE_OFF_ID    INTEGER AUTO_INCREMENT NOT NULL,
ACCOUNT_ID	INTEGER NOT NULL,
WAIVE_OFF_DATE	DATE NOT NULL,
WAIVE_OFF_TYPE	VARCHAR(20) NOT NULL,
PRIMARY KEY  (WAIVE_OFF_ID),
FOREIGN KEY(ACCOUNT_ID)
    REFERENCES LOAN_ACCOUNT(ACCOUNT_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)ENGINE=InnoDB CHARACTER SET utf8;


CREATE TABLE LOAN_SUMMARY(
 ACCOUNT_ID INTEGER NOT NULL,
 ORIG_PRINCIPAL DECIMAL(10,3),
 ORIG_PRINCIPAL_CURRENCY_ID SMALLINT,
 
 ORIG_INTEREST DECIMAL(10,3),
 ORIG_INTEREST_CURRENCY_ID SMALLINT,
 
 ORIG_FEES DECIMAL(10,3),
 ORIG_FEES_CURRENCY_ID SMALLINT,
 
 ORIG_PENALTY DECIMAL(10,3),
 ORIG_PENALTY_CURRENCY_ID SMALLINT,
 
 PRINCIPAL_PAID DECIMAL(10,3),
 PRINCIPAL_PAID_CURRENCY_ID SMALLINT,
 
 INTEREST_PAID DECIMAL(10,3),
 INTEREST_PAID_CURRENCY_ID SMALLINT,
 
 FEES_PAID DECIMAL(10,3),
 FEES_PAID_CURRENCY_ID SMALLINT,
 
 PENALTY_PAID DECIMAL(10,3),
 PENALTY_PAID_CURRENCY_ID SMALLINT,
 
 PRIMARY KEY(ACCOUNT_ID),
 FOREIGN KEY(ORIG_PRINCIPAL_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(ORIG_INTEREST_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(ORIG_FEES_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(ORIG_PENALTY_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(PRINCIPAL_PAID_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(INTEREST_PAID_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(FEES_PAID_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(PENALTY_PAID_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(ACCOUNT_ID)
    REFERENCES LOAN_ACCOUNT(ACCOUNT_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE CHANGE_LOG_DETAIL (
  SEQUENCE_NUM INTEGER AUTO_INCREMENT NOT NULL,
  CHANGE_LOG_ID INTEGER NOT NULL ,
  FIELD_NAME VARCHAR(100) DEFAULT NULL,
  OLD_VALUE VARCHAR(200)  ,
  NEW_VALUE VARCHAR(200)  ,
  PRIMARY KEY  (SEQUENCE_NUM),
  FOREIGN KEY(CHANGE_LOG_ID)
    REFERENCES CHANGE_LOG(CHANGE_LOG_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
) ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE CUSTOMER_ACCOUNT (
  ACCOUNT_ID INTEGER NOT NULL,
  PRIMARY KEY(ACCOUNT_ID),
  FOREIGN KEY(ACCOUNT_ID)
    REFERENCES ACCOUNT(ACCOUNT_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE CUSTOMER_ACCOUNT_ACTIVITY (
  CUSTOMER_ACCOUNT_ACTIVITY_ID INTEGER AUTO_INCREMENT NOT NULL,
  ACCOUNT_ID INTEGER NOT NULL,
  DESCRIPTION VARCHAR(200) NOT NULL,
  AMOUNT DECIMAL(10,3),
  FEE_AMOUNT_CURRENCY_ID SMALLINT,
  CREATED_DATE DATE NOT NULL,
  CREATED_BY SMALLINT,
  PRIMARY KEY(CUSTOMER_ACCOUNT_ACTIVITY_ID),
  FOREIGN KEY(ACCOUNT_ID)
      REFERENCES ACCOUNT(ACCOUNT_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(FEE_AMOUNT_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(CREATED_BY)
    REFERENCES PERSONNEL(PERSONNEL_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)      
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE ATTENDANCE (
  MEETING_ID INTEGER NOT NULL,
  MEETING_DATE DATE NOT NULL,
  ATTENDANCE SMALLINT,
  NOTES VARCHAR(200) NOT NULL,
  PRIMARY KEY(MEETING_ID, MEETING_DATE),
  FOREIGN KEY(MEETING_ID)
    REFERENCES CUSTOMER_MEETING(CUSTOMER_MEETING_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE CHECKLIST_DETAIL (
  DETAIL_ID INTEGER AUTO_INCREMENT NOT NULL,
  CHECKLIST_ID SMALLINT,
  LOCALE_ID SMALLINT,
  DETAIL_TEXT VARCHAR(250),
  ANSWER_TYPE SMALLINT NOT NULL,
  PRIMARY KEY(DETAIL_ID),
  FOREIGN KEY(CHECKLIST_ID)
    REFERENCES CHECKLIST(CHECKLIST_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(LOCALE_ID)
    REFERENCES SUPPORTED_LOCALE(LOCALE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE LOAN_PENALTY (
  LOAN_PENALTY_ID INTEGER AUTO_INCREMENT NOT NULL,
  ACCOUNT_ID INTEGER,
  PENALTY_ID SMALLINT NOT NULL,
  START_DATE DATE,
  END_DATE DATE,
  PENALTY_TYPE VARCHAR(200),
  PENALTY_RATE DECIMAL(13,10),
  PRIMARY KEY(LOAN_PENALTY_ID),
  FOREIGN KEY(ACCOUNT_ID)
    REFERENCES LOAN_ACCOUNT(ACCOUNT_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(PENALTY_ID)
    REFERENCES PENALTY(PENALTY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE PRD_CHECKLIST (
  CHECKLIST_ID SMALLINT NOT NULL,
  PRD_TYPE_ID SMALLINT,
  ACCOUNT_STATUS SMALLINT NOT NULL,
  PRIMARY KEY (CHECKLIST_ID),
  FOREIGN KEY(ACCOUNT_STATUS)
    REFERENCES ACCOUNT_STATE(ACCOUNT_STATE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(CHECKLIST_ID)
    REFERENCES CHECKLIST(CHECKLIST_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(PRD_TYPE_ID)
    REFERENCES PRD_TYPE(PRD_TYPE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE ACCOUNT_PAYMENT (
  PAYMENT_ID INTEGER AUTO_INCREMENT NOT NULL,
  ACCOUNT_ID INTEGER NOT NULL,
  PAYMENT_TYPE_ID SMALLINT NOT NULL,
  CURRENCY_ID SMALLINT,
  AMOUNT DECIMAL(10, 3) NOT NULL,
  RECEIPT_NUMBER VARCHAR(25),
  VOUCHER_NUMBER VARCHAR(50),
  CHECK_NUMBER VARCHAR(50),
  PAYMENT_DATE DATE NOT NULL,
  RECEIPT_DATE DATE,
  BANK_NAME VARCHAR(50),
  PRIMARY KEY(PAYMENT_ID),
  FOREIGN KEY(ACCOUNT_ID)
    REFERENCES ACCOUNT(ACCOUNT_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(PAYMENT_TYPE_ID)
    REFERENCES PAYMENT_TYPE(PAYMENT_TYPE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE ACCOUNT_SURVEY (
  ACCOUNT_SURVEY_ID SMALLINT NOT NULL,
  ACCOUNT_ID INTEGER,
  SURVEY_ID INTEGER,
  STATUS_ID SMALLINT NOT NULL,
  COMPLETED SMALLINT NOT NULL,
  COMPLETED_DATE DATE NOT NULL,
  PRIMARY KEY(ACCOUNT_SURVEY_ID),
  FOREIGN KEY(ACCOUNT_ID)
    REFERENCES ACCOUNT(ACCOUNT_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(STATUS_ID)
    REFERENCES ACCOUNT_STATE(ACCOUNT_STATE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(SURVEY_ID)
    REFERENCES SURVEY(SURVEY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;


CREATE TABLE CUSTOMER_SCHEDULE (
  ID INTEGER AUTO_INCREMENT NOT NULL,
  ACCOUNT_ID INTEGER NOT NULL,
  CUSTOMER_ID INTEGER NOT NULL,
  CURRENCY_ID SMALLINT,
  ACTION_DATE DATE,
    MISC_FEES DECIMAL(10,3),
  MISC_FEES_CURRENCY_ID SMALLINT,
  
  MISC_FEES_PAID DECIMAL(10,3),
  MISC_FEES_PAID_CURRENCY_ID SMALLINT,
  
  MISC_PENALTY DECIMAL(10,3),
  MISC_PENALTY_CURRENCY_ID SMALLINT,
  
  MISC_PENALTY_PAID DECIMAL(10,3),
  MISC_PENALTY_PAID_CURRENCY_ID SMALLINT,
  
  PAYMENT_STATUS SMALLINT NOT NULL,
  INSTALLMENT_ID SMALLINT NOT NULL,
  PAYMENT_DATE DATE,
  PARENT_FLAG SMALLINT,
  VERSION_NO INTEGER NOT NULL,
  PRIMARY KEY(ID),
  FOREIGN KEY(ACCOUNT_ID)
    REFERENCES ACCOUNT(ACCOUNT_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
 FOREIGN KEY(CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(CUSTOMER_ID)
    REFERENCES CUSTOMER(CUSTOMER_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE LOAN_SCHEDULE (
  ID INTEGER AUTO_INCREMENT NOT NULL,
  ACCOUNT_ID INTEGER NOT NULL,
  CUSTOMER_ID INTEGER NOT NULL,
  CURRENCY_ID SMALLINT,
  ACTION_DATE DATE,
  
  PRINCIPAL DECIMAL(10, 3) NOT NULL,
  PRINCIPAL_CURRENCY_ID SMALLINT,
  
  INTEREST DECIMAL(10, 3) NOT NULL,
  INTEREST_CURRENCY_ID SMALLINT,
  
  PENALTY DECIMAL(10, 3) NOT NULL,
  PENALTY_CURRENCY_ID SMALLINT,
  
  MISC_FEES DECIMAL(10,3),
  MISC_FEES_CURRENCY_ID SMALLINT,
  
  MISC_FEES_PAID DECIMAL(10,3),
  MISC_FEES_PAID_CURRENCY_ID SMALLINT,
  
  MISC_PENALTY DECIMAL(10,3),
  MISC_PENALTY_CURRENCY_ID SMALLINT,
  
  MISC_PENALTY_PAID DECIMAL(10,3),
  MISC_PENALTY_PAID_CURRENCY_ID SMALLINT,
  
  PRINCIPAL_PAID DECIMAL(10,3),
  PRINCIPAL_PAID_CURRENCY_ID SMALLINT,
  
  INTEREST_PAID DECIMAL(10,3),
  INTEREST_PAID_CURRENCY_ID SMALLINT,
  
  PENALTY_PAID DECIMAL(10,3),
  PENALTY_PAID_CURRENCY_ID SMALLINT,
  
  PAYMENT_STATUS SMALLINT NOT NULL,
  INSTALLMENT_ID SMALLINT NOT NULL,
  PAYMENT_DATE DATE,
  PARENT_FLAG SMALLINT,
  VERSION_NO INTEGER NOT NULL,
  PRIMARY KEY(ID),
  FOREIGN KEY(ACCOUNT_ID)
    REFERENCES ACCOUNT(ACCOUNT_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
 FOREIGN KEY(CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  
       
  FOREIGN KEY(PRINCIPAL_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  
  FOREIGN KEY(INTEREST_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  
  FOREIGN KEY(PENALTY_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  
  FOREIGN KEY(MISC_FEES_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  
  FOREIGN KEY(MISC_FEES_PAID_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  
  FOREIGN KEY(MISC_PENALTY_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  
  FOREIGN KEY(PRINCIPAL_PAID_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  
  FOREIGN KEY(INTEREST_PAID_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  
  FOREIGN KEY(PENALTY_PAID_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,

  FOREIGN KEY(MISC_PENALTY_PAID_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  
  FOREIGN KEY(CUSTOMER_ID)
    REFERENCES CUSTOMER(CUSTOMER_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE SAVING_SCHEDULE (
  ID INTEGER AUTO_INCREMENT NOT NULL,
  ACCOUNT_ID INTEGER NOT NULL,
  CUSTOMER_ID INTEGER NOT NULL,
  CURRENCY_ID SMALLINT,
  ACTION_DATE DATE,
  DEPOSIT DECIMAL(10, 3) NOT NULL,
  DEPOSIT_CURRENCY_ID SMALLINT,
  DEPOSIT_PAID DECIMAL(10,3),
  DEPOSIT_PAID_CURRENCY_ID SMALLINT,
  PAYMENT_STATUS SMALLINT NOT NULL,
  INSTALLMENT_ID SMALLINT NOT NULL,
  PAYMENT_DATE DATE,
  PARENT_FLAG SMALLINT,
  VERSION_NO INTEGER NOT NULL,
  PRIMARY KEY(ID),
  FOREIGN KEY(ACCOUNT_ID)
    REFERENCES ACCOUNT(ACCOUNT_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
 FOREIGN KEY(CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(DEPOSIT_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(DEPOSIT_PAID_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(CUSTOMER_ID)
    REFERENCES CUSTOMER(CUSTOMER_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE CUSTOMER_CHECKLIST (
  CHECKLIST_ID SMALLINT NOT NULL,
  LEVEL_ID SMALLINT NOT NULL,
  CUSTOMER_STATUS_ID SMALLINT NOT NULL,
  PRIMARY KEY  (CHECKLIST_ID),
  FOREIGN KEY(CHECKLIST_ID)
    REFERENCES CHECKLIST(CHECKLIST_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(LEVEL_ID)
    REFERENCES CUSTOMER_LEVEL(LEVEL_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(CUSTOMER_STATUS_ID)
    REFERENCES CUSTOMER_STATE(STATUS_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE ACCOUNT_FEES (
  ACCOUNT_FEE_ID INTEGER AUTO_INCREMENT NOT NULL,
  ACCOUNT_ID INTEGER NOT NULL,
  FEE_ID SMALLINT NOT NULL,
  FEE_FREQUENCY INTEGER,
  STATUS SMALLINT,
  INHERITED_FLAG SMALLINT,
  START_DATE DATE,
  END_DATE DATE,
  ACCOUNT_FEE_AMNT DECIMAL(10,3) NOT NULL,
  ACCOUNT_FEE_AMNT_CURRENCY_ID SMALLINT,
  FEE_AMNT  DECIMAL(10,3) NOT NULL,
  FEE_STATUS SMALLINT,
  STATUS_CHANGE_DATE DATE,
  VERSION_NO INTEGER NOT NULL,
  LAST_APPLIED_DATE DATE,
  PRIMARY KEY(ACCOUNT_FEE_ID),
  FOREIGN KEY(ACCOUNT_ID)
    REFERENCES ACCOUNT(ACCOUNT_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(FEE_ID)
    REFERENCES FEES(FEE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(ACCOUNT_FEE_AMNT_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(FEE_FREQUENCY)
    REFERENCES RECURRENCE_DETAIL(DETAILS_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE SAVINGS_ACCOUNT (
  ACCOUNT_ID INTEGER NOT NULL,
  ACTIVATION_DATE DATE,
  SAVINGS_BALANCE DECIMAL(10, 3),
  SAVINGS_BALANCE_CURRENCY_ID SMALLINT,
  RECOMMENDED_AMOUNT DECIMAL(10, 3),
  RECOMMENDED_AMOUNT_CURRENCY_ID SMALLINT,
  RECOMMENDED_AMNT_UNIT_ID SMALLINT,
  SAVINGS_TYPE_ID SMALLINT NOT NULL,
  INT_TO_BE_POSTED DECIMAL(10, 3),
  INT_TO_BE_POSTED_CURRENCY_ID SMALLINT,  
  LAST_INT_CALC_DATE DATE,
  LAST_INT_POST_DATE DATE,
  NEXT_INT_CALC_DATE DATE,
  NEXT_INT_POST_DATE DATE,
  INTER_INT_CALC_DATE DATE,
  PRD_OFFERING_ID SMALLINT NOT NULL,
  INTEREST_RATE DECIMAL(13, 10) NOT NULL,
  INTEREST_CALCULATION_TYPE_ID SMALLINT NOT NULL,
  TIME_PER_FOR_INT_CALC INTEGER,
  MIN_AMNT_FOR_INT DECIMAL(10,3),
  MIN_AMNT_FOR_INT_CURRENCY_ID SMALLINT,
  PRIMARY KEY(ACCOUNT_ID),
  FOREIGN KEY(ACCOUNT_ID)
    REFERENCES ACCOUNT(ACCOUNT_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(SAVINGS_BALANCE_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(RECOMMENDED_AMOUNT_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(INT_TO_BE_POSTED_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(RECOMMENDED_AMNT_UNIT_ID)
    REFERENCES RECOMMENDED_AMNT_UNIT(RECOMMENDED_AMNT_UNIT_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(SAVINGS_TYPE_ID)
    REFERENCES SAVINGS_TYPE(SAVINGS_TYPE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(PRD_OFFERING_ID)
    REFERENCES PRD_OFFERING(PRD_OFFERING_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(INTEREST_CALCULATION_TYPE_ID)
    REFERENCES INTEREST_CALCULATION_TYPES(INTEREST_CALCULATION_TYPE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(TIME_PER_FOR_INT_CALC)
     REFERENCES MEETING (MEETING_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(MIN_AMNT_FOR_INT_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE SAVINGS_ACTIVITY_DETAILS (
  ID INTEGER AUTO_INCREMENT NOT NULL,
  CREATED_BY SMALLINT,
  ACCOUNT_ID INTEGER NOT NULL,	
  CREATED_DATE TIMESTAMP NOT NULL,
  ACCOUNT_ACTION_ID SMALLINT NOT NULL,
  AMOUNT DECIMAL(10, 3) NOT NULL,
  AMOUNT_CURRENCY_ID SMALLINT NOT NULL,
  BALANCE_AMOUNT DECIMAL(10, 3) NOT NULL,
  BALANCE_AMOUNT_CURRENCY_ID SMALLINT NOT NULL,
  PRIMARY KEY(ID),
  FOREIGN KEY(CREATED_BY)
    REFERENCES PERSONNEL(PERSONNEL_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(ACCOUNT_ID)
    REFERENCES ACCOUNT(ACCOUNT_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(ACCOUNT_ACTION_ID)
    REFERENCES ACCOUNT_ACTION(ACCOUNT_ACTION_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(AMOUNT_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(BALANCE_AMOUNT_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION	
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE SAVINGS_PERFORMANCE(
  ID INTEGER AUTO_INCREMENT NOT NULL,
  ACCOUNT_ID INTEGER NOT NULL,
  TOTAL_DEPOSITS DECIMAL(10,3),
  TOTAL_DEPOSITS_CURRENCY_ID SMALLINT,
  TOTAL_WITHDRAWALS DECIMAL(10,3),
  TOTAL_WITHDRAWALS_CURRENCY_ID SMALLINT,
  TOTAL_INTEREST_EARNED DECIMAL(10,3),
  TOTAL_INTEREST_EARNED_CURRENCY_ID SMALLINT,
  MISSED_DEPOSITS SMALLINT,
  PRIMARY KEY(ID),
  FOREIGN KEY(ACCOUNT_ID)
    REFERENCES ACCOUNT(ACCOUNT_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(TOTAL_DEPOSITS_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(TOTAL_WITHDRAWALS_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(TOTAL_INTEREST_EARNED_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION     
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE ACCOUNT_CUSTOM_FIELD (
  ACCOUNT_CUSTOM_FIELD_ID INTEGER AUTO_INCREMENT NOT NULL,
  ACCOUNT_ID INTEGER NOT NULL,
  FIELD_ID SMALLINT NOT NULL,
  FIELD_VALUE VARCHAR(200),
  PRIMARY KEY(ACCOUNT_CUSTOM_FIELD_ID),
  FOREIGN KEY(FIELD_ID)
    REFERENCES CUSTOM_FIELD_DEFINITION(FIELD_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(ACCOUNT_ID)
    REFERENCES ACCOUNT(ACCOUNT_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE ACCOUNT_TRXN (
  ACCOUNT_TRXN_ID INTEGER AUTO_INCREMENT NOT NULL,
  ACCOUNT_ID INTEGER NOT NULL,
  PAYMENT_ID INTEGER NOT NULL,
  PERSONNEL_ID INTEGER,
  ACCOUNT_ACTION_ID SMALLINT NOT NULL,
  CURRENCY_ID SMALLINT,
  AMOUNT_CURRENCY_ID SMALLINT,
  AMOUNT DECIMAL(10, 3) NOT NULL,
  DUE_DATE DATE,
  COMMENTS VARCHAR(200),
  ACTION_DATE DATE NOT NULL,
  CREATED_DATE TIMESTAMP NOT NULL,
  CUSTOMER_ID INTEGER,
  INSTALLMENT_ID SMALLINT,
  RELATED_TRXN_ID INTEGER,
  PRIMARY KEY(ACCOUNT_TRXN_ID),
  FOREIGN KEY(ACCOUNT_ID)
    REFERENCES ACCOUNT(ACCOUNT_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(ACCOUNT_ACTION_ID)
    REFERENCES ACCOUNT_ACTION(ACCOUNT_ACTION_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(PAYMENT_ID)
    REFERENCES ACCOUNT_PAYMENT(PAYMENT_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
FOREIGN KEY(CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(AMOUNT_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(CUSTOMER_ID)
    REFERENCES CUSTOMER(CUSTOMER_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION      
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE FEE_TRXN_DETAIL (
  FEE_TRXN_DETAIL_ID INTEGER AUTO_INCREMENT NOT NULL,
  ACCOUNT_TRXN_ID INTEGER NOT NULL,
  ACCOUNT_FEE_ID INTEGER,
  FEE_AMOUNT_CURRENCY_ID SMALLINT,
  FEE_AMOUNT DECIMAL(10, 3) NOT NULL,
  PRIMARY KEY(FEE_TRXN_DETAIL_ID),
  FOREIGN KEY(ACCOUNT_FEE_ID)
    REFERENCES ACCOUNT_FEES(ACCOUNT_FEE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(FEE_AMOUNT_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(ACCOUNT_TRXN_ID)
    REFERENCES ACCOUNT_TRXN(ACCOUNT_TRXN_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;


CREATE TABLE LOAN_FEE_SCHEDULE (
  ACCOUNT_FEES_DETAIL_ID INTEGER AUTO_INCREMENT NOT NULL,
  ID INTEGER NOT NULL,
  INSTALLMENT_ID INTEGER NOT NULL,
  FEE_ID SMALLINT NOT NULL,
  ACCOUNT_FEE_ID INTEGER NOT NULL,  
  AMOUNT DECIMAL(10, 3),
  AMOUNT_CURRENCY_ID SMALLINT,
  AMOUNT_PAID DECIMAL(10,3),
  AMOUNT_PAID_CURRENCY_ID SMALLINT, 
  VERSION_NO INTEGER NOT NULL,
  PRIMARY KEY(ACCOUNT_FEES_DETAIL_ID),
  FOREIGN KEY(ID)
    REFERENCES LOAN_SCHEDULE(ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(AMOUNT_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(AMOUNT_PAID_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(FEE_ID)
    REFERENCES FEES(FEE_ID),
  FOREIGN KEY(ACCOUNT_FEE_ID)
    REFERENCES ACCOUNT_FEES(ACCOUNT_FEE_ID)
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE CUSTOMER_FEE_SCHEDULE (
  ACCOUNT_FEES_DETAIL_ID INTEGER AUTO_INCREMENT NOT NULL,
  ID INTEGER NOT NULL,
  INSTALLMENT_ID INTEGER NOT NULL,
  FEE_ID SMALLINT NOT NULL,
  ACCOUNT_FEE_ID INTEGER NOT NULL,  
  AMOUNT DECIMAL(10, 3),
  AMOUNT_CURRENCY_ID SMALLINT,
  AMOUNT_PAID DECIMAL(10,3),
  AMOUNT_PAID_CURRENCY_ID SMALLINT, 
  VERSION_NO INTEGER NOT NULL,
  PRIMARY KEY(ACCOUNT_FEES_DETAIL_ID ),
  FOREIGN KEY(ID)
    REFERENCES CUSTOMER_SCHEDULE(ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(AMOUNT_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(AMOUNT_PAID_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(FEE_ID)
    REFERENCES FEES(FEE_ID),
  FOREIGN KEY(ACCOUNT_FEE_ID)
    REFERENCES ACCOUNT_FEES(ACCOUNT_FEE_ID)

 
)
ENGINE=InnoDB CHARACTER SET utf8;



CREATE TABLE SAVINGS_TRXN_DETAIL (
  ACCOUNT_TRXN_ID INTEGER NOT NULL,
  DEPOSIT_AMOUNT DECIMAL(10, 3) ,
  DEPOSIT_AMOUNT_CURRENCY_ID SMALLINT,
  WITHDRAWAL_AMOUNT DECIMAL(10, 3) ,
  WITHDRAWAL_AMOUNT_CURRENCY_ID SMALLINT,
  INTEREST_AMOUNT DECIMAL(10, 3) ,
  INTEREST_AMOUNT_CURRENCY_ID SMALLINT,
  BALANCE DECIMAL(10, 3), 
  BALANCE_CURRENCY_ID  SMALLINT NOT NULL,
  PRIMARY KEY(ACCOUNT_TRXN_ID),
  FOREIGN KEY(ACCOUNT_TRXN_ID)
    REFERENCES ACCOUNT_TRXN(ACCOUNT_TRXN_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(DEPOSIT_AMOUNT_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(WITHDRAWAL_AMOUNT_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(INTEREST_AMOUNT_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,      
  FOREIGN KEY(BALANCE_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;


CREATE TABLE LOAN_TRXN_DETAIL (
  ACCOUNT_TRXN_ID INTEGER NOT NULL,
  PRINCIPAL_AMOUNT DECIMAL(10, 3),
  PRINCIPAL_AMOUNT_CURRENCY_ID SMALLINT,
  INTEREST_AMOUNT DECIMAL(10, 3),
  INTEREST_AMOUNT_CURRENCY_ID SMALLINT,
  PENALTY_AMOUNT DECIMAL(10, 3),
  PENALTY_AMOUNT_CURRENCY_ID SMALLINT,
  MISC_FEE_AMOUNT DECIMAL(10, 3),
  MISC_FEE_AMOUNT_CURRENCY_ID SMALLINT,
  MISC_PENALTY_AMOUNT DECIMAL(10, 3),
  MISC_PENALTY_AMOUNT_CURRENCY_ID SMALLINT,
  PRIMARY KEY(ACCOUNT_TRXN_ID),
  FOREIGN KEY(PRINCIPAL_AMOUNT_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(INTEREST_AMOUNT_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(PENALTY_AMOUNT_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(MISC_PENALTY_AMOUNT_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(MISC_FEE_AMOUNT_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,     
  FOREIGN KEY(ACCOUNT_TRXN_ID)
    REFERENCES ACCOUNT_TRXN(ACCOUNT_TRXN_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE CUSTOMER_TRXN_DETAIL (
  ACCOUNT_TRXN_ID INTEGER NOT NULL,
  TOTAL_AMOUNT DECIMAL(10, 3),
  TOTAL_AMOUNT_CURRENCY_ID SMALLINT,
  MISC_FEE_AMOUNT DECIMAL(10, 3),
  MISC_FEE_AMOUNT_CURRENCY_ID SMALLINT,
  MISC_PENALTY_AMOUNT DECIMAL(10, 3),
  MISC_PENALTY_AMOUNT_CURRENCY_ID SMALLINT,
  PRIMARY KEY(ACCOUNT_TRXN_ID),
  FOREIGN KEY(TOTAL_AMOUNT_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(MISC_PENALTY_AMOUNT_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(MISC_FEE_AMOUNT_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(ACCOUNT_TRXN_ID)
    REFERENCES ACCOUNT_TRXN(ACCOUNT_TRXN_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE CUSTOMER_LOAN_ACCOUNT_DETAIL (
  ACCOUNT_TRXN_ID INTEGER NOT NULL,
  ACCOUNT_ID INTEGER NOT NULL,
  CURRENCY_ID SMALLINT,
  INSTALLMENT_NUMBER SMALLINT NOT NULL,
  DUE_DATE DATE NOT NULL,
  PRINCIPAL DECIMAL(10, 3) NOT NULL,
  PRINCIPAL_CURRENCY_ID SMALLINT NOT NULL,
  INTEREST DECIMAL(10, 3) NOT NULL,
  INTEREST_CURRENCY_ID SMALLINT NOT NULL,
  PENALTY DECIMAL(10, 3) NOT NULL,
  PENALTY_CURRENCY_ID SMALLINT NOT NULL,
  FOREIGN KEY(ACCOUNT_TRXN_ID)
    REFERENCES ACCOUNT_TRXN(ACCOUNT_TRXN_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
FOREIGN KEY(CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(PRINCIPAL_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(INTEREST_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(PENALTY_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(ACCOUNT_ID)
    REFERENCES LOAN_ACCOUNT(ACCOUNT_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;
CREATE TABLE SPOUSE_FATHER_LOOKUP (
  SPOUSE_FATHER_ID INTEGER NOT NULL ,
  LOOKUP_ID INTEGER NOT NULL ,
  PRIMARY KEY  (SPOUSE_FATHER_ID),
  FOREIGN KEY (LOOKUP_ID) REFERENCES LOOKUP_VALUE (LOOKUP_ID)
  ON DELETE NO ACTION
      ON UPDATE NO ACTION
) 
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE PRD_OFFERING_MEETING (
  PRD_OFFERING_MEETING_ID SMALLINT AUTO_INCREMENT NOT NULL,
  PRD_OFFERING_ID SMALLINT NOT NULL ,
  PRD_MEETING_ID INTEGER ,
  PRD_OFFERING_MEETING_TYPE_ID SMALLINT NOT NULL ,
  PRIMARY KEY  (PRD_OFFERING_MEETING_ID),
  FOREIGN KEY (PRD_OFFERING_ID) REFERENCES PRD_OFFERING (PRD_OFFERING_ID),
  FOREIGN KEY (PRD_MEETING_ID) REFERENCES MEETING (MEETING_ID),
  FOREIGN KEY (PRD_OFFERING_MEETING_TYPE_ID) REFERENCES MEETING_TYPE (MEETING_TYPE_ID)
) ENGINE=InnoDB;

CREATE TABLE ACCOUNT_STATE_FLAG (
  FLAG_ID SMALLINT AUTO_INCREMENT NOT NULL,
  LOOKUP_ID INTEGER NOT NULL,
  STATUS_ID SMALLINT NOT NULL,
  FLAG_DESCRIPTION VARCHAR(200),
  RETAIN_FLAG SMALLINT NOT NULL,
  PRIMARY KEY(FLAG_ID),
  FOREIGN KEY(STATUS_ID)
    REFERENCES ACCOUNT_STATE(ACCOUNT_STATE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(LOOKUP_ID)
    REFERENCES LOOKUP_VALUE(LOOKUP_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE ACCOUNT_FLAG_DETAIL (
  ACCOUNT_FLAG_ID INTEGER AUTO_INCREMENT NOT NULL,
  ACCOUNT_ID INTEGER NOT NULL,
  FLAG_ID SMALLINT NOT NULL,
  CREATED_BY SMALLINT NOT NULL,
  CREATED_DATE DATE NOT NULL,
  PRIMARY KEY(ACCOUNT_FLAG_ID),
  FOREIGN KEY(ACCOUNT_ID)
    REFERENCES ACCOUNT(ACCOUNT_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(FLAG_ID)
    REFERENCES ACCOUNT_STATE_FLAG(FLAG_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(CREATED_BY)
    REFERENCES PERSONNEL(PERSONNEL_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;


CREATE TABLE ACCOUNT_STATUS_CHANGE_HISTORY (
  ACCOUNT_STATUS_CHANGE_ID INTEGER AUTO_INCREMENT NOT NULL,
  ACCOUNT_ID INTEGER NOT NULL,
  OLD_STATUS SMALLINT,
  NEW_STATUS SMALLINT NOT NULL,
  CHANGED_BY SMALLINT NOT NULL,
  CHANGED_DATE DATE NOT NULL,
  PRIMARY KEY(ACCOUNT_STATUS_CHANGE_ID),
  FOREIGN KEY(ACCOUNT_ID)
    REFERENCES ACCOUNT(ACCOUNT_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(OLD_STATUS)
    REFERENCES ACCOUNT_STATE(ACCOUNT_STATE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(NEW_STATUS)
    REFERENCES ACCOUNT_STATE(ACCOUNT_STATE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(CHANGED_BY)
    REFERENCES PERSONNEL(PERSONNEL_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;


CREATE TABLE SCHEDULED_TASKS
(
    TASKID INTEGER AUTO_INCREMENT,	
    TASKNAME VARCHAR(200),
    TIME TIMESTAMP,
    DESCRIPTION VARCHAR(200),
    PRIMARY KEY(TASKID)
)ENGINE=InnoDB CHARACTER SET utf8;
    
CREATE TABLE TEMP_ID (
  ID SMALLINT AUTO_INCREMENT,
  TEMPID SMALLINT,
  PRIMARY KEY(ID)
)ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE SYSTEM_CONFIGURATION (
  OFFICE_ID SMALLINT,
  SESSION_TIME_OUT SMALLINT,
  SCHEDULE_MEETING_ON_HOLIDAY VARCHAR(20),
  DAYS_FOR_CAL_DEFINITION SMALLINT,
  NAME_SEQUENCE VARCHAR(100),
  BACK_DATED_TXN_ALLOWED SMALLINT,
  CENTER_HIERARCHY_EXIST SMALLINT,
  GROUP_CAN_APPLY_LOANS SMALLINT,
  CLIENT_CAN_EXIST_OUTSIDE_GROUP SMALLINT,
  NO_OF_INTEREST_DAYS SMALLINT,
  FOREIGN KEY(OFFICE_ID)
    REFERENCES OFFICE(OFFICE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
) ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE FIELD_CONFIGURATION (
  FIELD_CONFIG_ID INTEGER AUTO_INCREMENT NOT NULL,
  FIELD_NAME VARCHAR(100) NOT NULL,
  ENTITY_ID SMALLINT NOT NULL,
  MANDATORY_FLAG SMALLINT NOT NULL,
  HIDDEN_FLAG SMALLINT NOT NULL,
  PARENT_FIELD_CONFIG_ID INTEGER,
  PRIMARY KEY(FIELD_CONFIG_ID),
  FOREIGN KEY(ENTITY_ID)
    REFERENCES ENTITY_MASTER(ENTITY_TYPE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(PARENT_FIELD_CONFIG_ID)
    REFERENCES FIELD_CONFIGURATION(FIELD_CONFIG_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION  
)ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE CUSTOMER_ATTENDANCE_TYPES(
   ATTENDANCE_ID SMALLINT AUTO_INCREMENT NOT NULL,
   ATTENDANCE_LOOKUP_ID INTEGER NOT NULL,
   DESCRIPTION VARCHAR(50),
   PRIMARY KEY(ATTENDANCE_ID),
   FOREIGN KEY(ATTENDANCE_LOOKUP_ID)
    REFERENCES LOOKUP_VALUE(LOOKUP_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;



CREATE TABLE COA (
  COA_ID SMALLINT AUTO_INCREMENT NOT NULL,
  COA_Name VARCHAR(150) NOT NULL,
  GLCODE_ID SMALLINT NOT NULL,
  PRIMARY KEY(COA_ID),
  FOREIGN KEY(GLCODE_ID)
    REFERENCES GL_CODE(GLCODE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE COA_IDMAPPER(
  CONSTANT_ID SMALLINT NOT NULL ,
  COA_ID SMALLINT NOT NULL,
  DESCRIPTION VARCHAR(50),
  PRIMARY KEY(CONSTANT_ID),
  FOREIGN KEY(COA_ID)
    REFERENCES COA(COA_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE FINANCIAL_ACTION (
   FIN_ACTION_ID SMALLINT NOT NULL,
   LOOKUP_ID INTEGER NOT NULL,
   PRIMARY KEY(FIN_ACTION_ID),
   FOREIGN KEY(LOOKUP_ID)
    REFERENCES LOOKUP_VALUE_LOCALE(LOOKUP_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE COAHIERARCHY (
  COA_ID SMALLINT NOT NULL ,
  PARENT_COAID SMALLINT,
  FOREIGN KEY(COA_ID)
    REFERENCES COA(COA_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
   FOREIGN KEY(PARENT_COAID)
     REFERENCES COA(COA_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE FINANCIAL_TRXN (
   TRXN_ID INTEGER AUTO_INCREMENT NOT NULL,
   ACCOUNT_TRXN_ID INTEGER NOT NULL,
   RELATED_FIN_TRXN INTEGER,
 CURRENCY_ID SMALLINT,
   FIN_ACTION_ID SMALLINT,
   GLCODE_ID SMALLINT NOT NULL, 
   POSTED_AMOUNT DECIMAL(10, 3) NOT NULL,
   POSTED_AMOUNT_CURRENCY_ID SMALLINT,
   BALANCE_AMOUNT DECIMAL(10, 3) NOT NULL,
   BALANCE_AMOUNT_CURRENCY_ID SMALLINT,
   ACTION_DATE DATE NOT NULL,
   POSTED_DATE DATE NOT NULL,
   POSTED_BY SMALLINT,
   ACCOUNTING_UPDATED SMALLINT,
   NOTES VARCHAR(200),
   DEBIT_CREDIT_FLAG SMALLINT NOT NULL,
   PRIMARY KEY(TRXN_ID),
   FOREIGN KEY(ACCOUNT_TRXN_ID)
     REFERENCES ACCOUNT_TRXN(ACCOUNT_TRXN_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
FOREIGN KEY(CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(POSTED_AMOUNT_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(BALANCE_AMOUNT_CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
	FOREIGN KEY(CURRENCY_ID)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(RELATED_FIN_TRXN)
    REFERENCES FINANCIAL_TRXN(TRXN_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(FIN_ACTION_ID)
    REFERENCES FINANCIAL_ACTION(FIN_ACTION_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
   FOREIGN KEY(POSTED_BY)
    REFERENCES PERSONNEL(PERSONNEL_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(GLCODE_ID)
    REFERENCES GL_CODE(GLCODE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION  
)ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE CUSTOMER_ATTENDANCE(
	ID INTEGER AUTO_INCREMENT NOT NULL,
	MEETING_DATE DATE NOT NULL,
	CUSTOMER_ID INTEGER NOT NULL,
	ATTENDANCE SMALLINT,
	PRIMARY KEY(ID),
	FOREIGN KEY(CUSTOMER_ID)
	    REFERENCES CUSTOMER(CUSTOMER_ID)
	      ON DELETE NO ACTION
	      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;


CREATE TABLE COLL_SHEET (
  COLL_SHEET_ID INTEGER AUTO_INCREMENT NOT NULL,
  COLL_SHEET_DATE DATE NOT NULL,
  STATUS_FLAG SMALLINT NOT NULL,
  RUN_DATE DATE NOT NULL,
  PRIMARY KEY(COLL_SHEET_ID)
)ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE COLL_SHEET_CUSTOMER (
  COLL_SHEET_CUST_ID BIGINT AUTO_INCREMENT NOT NULL,
  COLL_SHEET_ID INTEGER NOT NULL,
  CUST_ID INTEGER NOT NULL,
  CUST_DISPLAY_NAME VARCHAR(200) NOT NULL,
  TOTAL_DUE_SAVINGS_LOAN DECIMAL(10,3) ,
  TOTAL_DUE_SAVINGS_LOAN_CURRENCY 	SMALLINT ,
  CUST_ACCNT_FEE DECIMAL(10,3),
  CUST_ACCNT_FEE_CURRENCY SMALLINT,
  CUST__ACCNT_PENALTY DECIMAL(10,3) ,
  CUST__ACCNT_PENALTY_CURRENCY SMALLINT,
  CUST_LEVEL SMALLINT NOT NULL,
  CUST_ACCNT_ID INTEGER,
  CUST_OFFICE_ID SMALLINT NOT NULL,
  SEARCH_ID VARCHAR(100) NOT NULL,
  PARENT_CUSTOMER_ID INTEGER ,
  COLLECTIVE_LN_AMNT_DUE DECIMAL(10,3),
  COLLECTIVE_LN_AMNT_DUE_CURRENCY SMALLINT,
  COLLECTIVE_LN_DISBURSAL DECIMAL(10,3),
  COLLECTIVE_LN_DISBURSAL_CURRENCY SMALLINT,
  COLLECTIVE_SAVINGS_DUE DECIMAL(10,3),
  COLLECTIVE_SAVINGS_DUE_CURRENCY SMALLINT,
  COLLECTIVE_ACCNT_CHARGES DECIMAL(10,3),
  COLLECTIVE_ACCNT_CHARGES_CURRENCY SMALLINT,
  COLLECTIVE_TOTAL_CHARGES DECIMAL(10,3),
  COLLECTIVE_TOTAL_CHARGES_CURRENCY SMALLINT,
  COLLECTIVE_NET_CASH_IN DECIMAL(10,3),
  COLLECTIVE_NET_CASH_IN_CURRENCY SMALLINT,
  LOAN_OFFICER_ID SMALLINT,
  PRIMARY KEY(COLL_SHEET_CUST_ID),    
  FOREIGN KEY(TOTAL_DUE_SAVINGS_LOAN_CURRENCY)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,    
  FOREIGN KEY(CUST_ACCNT_FEE_CURRENCY)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,    
  FOREIGN KEY(CUST__ACCNT_PENALTY_CURRENCY)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,    
  FOREIGN KEY(COLLECTIVE_LN_AMNT_DUE_CURRENCY)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,    
  FOREIGN KEY(COLLECTIVE_LN_DISBURSAL_CURRENCY)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,    
  FOREIGN KEY(COLLECTIVE_SAVINGS_DUE_CURRENCY)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,    
  FOREIGN KEY(COLLECTIVE_ACCNT_CHARGES_CURRENCY)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,    
  FOREIGN KEY(COLLECTIVE_TOTAL_CHARGES_CURRENCY)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,    
  FOREIGN KEY(COLLECTIVE_NET_CASH_IN_CURRENCY)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE COLL_SHEET_LOAN_DETAILS (
  LOAN_DETAILS_ID BIGINT AUTO_INCREMENT NOT NULL,
  COLL_SHEET_CUST_ID BIGINT NOT NULL,
  ACCNT_ID INTEGER NOT NULL,
  TOTAL_PRIN_DUE DECIMAL(10,3) NOT NULL,
  TOTAL_PRIN_DUE_CURRENCY SMALLINT,
  ORIG_LOAN_AMNT DECIMAL(10,3) NOT NULL,
  ORIG_LOAN_AMNT_CURRENCY SMALLINT,
  AMNT_TO_CLOSE_LOAN DECIMAL(10,3) NOT NULL,
  AMNT_TO_CLOSE_LOAN_CURRENCY SMALLINT,
  TOTAL_NO_OF_INSTALLMENTS SMALLINT NOT NULL,
  CURRENT_INSTALLMENT_NO SMALLINT,
  PRINCIPAL_DUE DECIMAL(10,3),
  PRINCIPAL_DUE_CURRENCY SMALLINT,
  INTEREST_DUE DECIMAL(10,3),
  INTEREST_DUE_CURRENCY SMALLINT,
  FEES_DUE DECIMAL(10,3),
  FEES_DUE_CURRENCY SMALLINT,
  PENALTY_DUE DECIMAL(10,3),
  PENALTY_DUE_CURRENCY SMALLINT,
  TOTAL_SCHEDULED_AMNT_DUE DECIMAL(10,3),
  TOTAL_SCHEDULED_AMNT_DUE_CURRENCY SMALLINT,
  PRINCIPAL_OVERDUE DECIMAL(10,3),
  PRINCIPAL_OVERDUE_CURRENCY SMALLINT,
  INTEREST_OVERDUE DECIMAL(10,3),
  INTEREST_OVERDUE_CURRENCY SMALLINT,
  FEES_OVERDUE DECIMAL(10,3),
  FEES_OVERDUE_CURRENCY SMALLINT,
  PENALTY_OVERDUE DECIMAL(10,3),
  PENALTY_OVERDUE_CURRENCY SMALLINT,
  TOTAL_AMNT_OVERDUE DECIMAL(10,3),
  TOTAL_AMNT_OVERDUE_CURRENCY SMALLINT,
  TOTAL_AMNT_DUE DECIMAL(10,3) ,
  TOTAL_AMNT_DUE_CURRENCY SMALLINT,
  AMNT_TOBE_DISBURSED DECIMAL(10,3),
  AMNT_TOBE_DISBURSED_CURRENCY SMALLINT,
  PRIMARY KEY(LOAN_DETAILS_ID),    
  FOREIGN KEY(ORIG_LOAN_AMNT_CURRENCY)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,    
  FOREIGN KEY(AMNT_TO_CLOSE_LOAN_CURRENCY)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,    
  FOREIGN KEY(PRINCIPAL_DUE_CURRENCY)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,    
  FOREIGN KEY(INTEREST_DUE_CURRENCY)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,    
  FOREIGN KEY(FEES_DUE_CURRENCY)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,    
  FOREIGN KEY(PENALTY_DUE_CURRENCY)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,    
  FOREIGN KEY(TOTAL_SCHEDULED_AMNT_DUE_CURRENCY)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,    
  FOREIGN KEY(PRINCIPAL_OVERDUE_CURRENCY)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,    
  FOREIGN KEY(INTEREST_OVERDUE_CURRENCY)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,    
  FOREIGN KEY(FEES_OVERDUE_CURRENCY)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,    
  FOREIGN KEY(PENALTY_OVERDUE_CURRENCY)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,    
  FOREIGN KEY(TOTAL_AMNT_OVERDUE_CURRENCY)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,    
  FOREIGN KEY(TOTAL_AMNT_DUE_CURRENCY)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,    
  FOREIGN KEY(AMNT_TOBE_DISBURSED_CURRENCY)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,    
  FOREIGN KEY(TOTAL_PRIN_DUE_CURRENCY)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE COLL_SHEET_SAVINGS_DETAILS (
  SAVINGS_DETAILS_ID BIGINT AUTO_INCREMENT NOT NULL,
  COLL_SHEET_CUST_ID INTEGER NOT NULL,
  ACCNT_ID INTEGER NOT NULL,
  ACCNT_BALANCE DECIMAL(10,3),
  ACCNT_BALANCE_CURRENCY SMALLINT,
  RECOMMENDED_AMNT_DUE DECIMAL(10,3),
  RECOMMENDED_AMNT_DUE_CURRENCY SMALLINT,
  AMNT_OVERDUE DECIMAL(10,3),
  AMNT_OVERDUE_CURRENCY SMALLINT,
  INSTALLMENT_ID SMALLINT NOT NULL,
  TOTAL_SAVINGS_AMNT_DUE DECIMAL(10,3),
  TOTAL_SAVINGS_AMNT_DUE_CURRENCY SMALLINT,
  PRIMARY KEY(SAVINGS_DETAILS_ID),    
  FOREIGN KEY(ACCNT_BALANCE_CURRENCY)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,    
  FOREIGN KEY(RECOMMENDED_AMNT_DUE_CURRENCY)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,    
  FOREIGN KEY(AMNT_OVERDUE_CURRENCY)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,    
  FOREIGN KEY(TOTAL_SAVINGS_AMNT_DUE_CURRENCY)
    REFERENCES CURRENCY(CURRENCY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)ENGINE=InnoDB CHARACTER SET utf8;


CREATE TABLE REPORT_CATEGORY (
  REPORT_CATEGORY_ID SMALLINT AUTO_INCREMENT NOT NULL,
  REPORT_CATEGORY_VALUE VARCHAR(100),  
  PRIMARY KEY(REPORT_CATEGORY_ID)
)ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE REPORT (
  REPORT_ID SMALLINT AUTO_INCREMENT NOT NULL,
  REPORT_CATEGORY_ID SMALLINT ,
  REPORT_NAME VARCHAR(100),
  REPORT_IDENTIFIER VARCHAR(100),
  PRIMARY KEY(REPORT_ID),
  FOREIGN KEY(REPORT_CATEGORY_ID)
    REFERENCES REPORT_CATEGORY(REPORT_CATEGORY_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION   
  
)ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE TRANSACTION_TYPE
(
 TRANSACTION_ID SMALLINT NOT NULL,
 TRANSACTION_NAME VARCHAR(100) NOT NULL,
 PRIMARY KEY (TRANSACTION_ID)
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE SUPPORTED_MODES
(
 MODE_ID SMALLINT NOT NULL,
 TRANSACTION_ID SMALLINT NOT NULL,
 PAYMENT_TYPE_ID SMALLINT NOT NULL,
 PRIMARY KEY(MODE_ID),
 FOREIGN KEY(TRANSACTION_ID)
   REFERENCES TRANSACTION_TYPE(TRANSACTION_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(PAYMENT_TYPE_ID)
    REFERENCES PAYMENT_TYPE(PAYMENT_TYPE_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE CLIENT_PERF_HISTORY (
  ID INTEGER AUTO_INCREMENT NOT NULL,
  CUSTOMER_ID INTEGER NOT NULL,
  LOAN_CYCLE_COUNTER SMALLINT,
  LAST_LOAN_AMNT DECIMAL(10,3),
  LAST_LOAN_AMNT_CURRENCY_ID SMALLINT,
  TOTAL_ACTIVE_LOANS SMALLINT,
  TOTAL_SAVINGS_AMNT DECIMAL(10,3),
  TOTAL_SAVINGS_AMNT_CURRENCY_ID SMALLINT,
  DELINQUINT_PORTFOLIO DECIMAL(10,3),
  DELINQUINT_PORTFOLIO_CURRENCY_ID SMALLINT,
  PRIMARY KEY(ID),
  FOREIGN KEY(CUSTOMER_ID)
    REFERENCES CUSTOMER(CUSTOMER_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE GROUP_PERF_HISTORY (
  ID INTEGER AUTO_INCREMENT NOT NULL,
  CUSTOMER_ID INTEGER NOT NULL,
  NO_OF_CLIENTS SMALLINT,
  LAST_GROUP_LOAN_AMNT_DISB DECIMAL(10,3),
  LAST_GROUP_LOAN_AMNT_DISB_CURRENCY_ID SMALLINT,
  AVG_LOAN_SIZE DECIMAL(10,3),
  AVG_LOAN_SIZE_CURRENCY_ID SMALLINT,
  TOTAL_OUTSTAND_LOAN_AMNT DECIMAL(10,3),
  TOTAL_OUTSTAND_LOAN_AMNT_CURRENCY_ID SMALLINT,
  PORTFOLIO_AT_RISK DECIMAL(10,3),
  PORTFOLIO_AT_RISK_CURRENCY_ID SMALLINT,
  TOTAL_SAVINGS_AMNT DECIMAL(10,3),
  TOTAL_SAVINGS_AMNT_CURRENCY_ID SMALLINT,
  PRIMARY KEY(ID),
  FOREIGN KEY(CUSTOMER_ID)
    REFERENCES CUSTOMER(CUSTOMER_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;

CREATE TABLE LOAN_PERF_HISTORY (
  ID INTEGER AUTO_INCREMENT NOT NULL,
  ACCOUNT_ID INTEGER NOT NULL,
  NO_OF_PAYMENTS SMALLINT,
  NO_OF_MISSED_PAYMENTS SMALLINT,
  DAYS_IN_ARREARS SMALLINT,
  LOAN_MATURITY_DATE DATE,
  PRIMARY KEY(ID),
  FOREIGN KEY(ACCOUNT_ID)
    REFERENCES ACCOUNT(ACCOUNT_ID)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
)
ENGINE=InnoDB CHARACTER SET utf8;
